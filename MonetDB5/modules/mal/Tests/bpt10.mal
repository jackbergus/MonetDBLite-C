#testing the BAT partition table
# nothing is saved because the bats are not persistent
a1:= bat.new(:oid,:int);
bat.insert(a1,0@0,0);
a2:= bat.new(:oid,:int);
bat.insert(a2,10@0,10);
a3:= bat.new(:oid,:int);
bat.insert(a3,20@0,20);

barrier (go,i):= language.newRange(1);
	bat.append(a1,i);
	bat.append(a2,i);
	bat.append(a3,i);
	redo (go,i):= language.nextElement(1,10);
exit (go,i);

# now really add it
partitions.deposit(a1);
partitions.deposit(a1,a2);
partitions.deposit(a1,a3);
partitions.dump();
partitions.close();
