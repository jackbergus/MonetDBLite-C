<html lang="en">
<head>
<title>Query Execution Plans - Untitled</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Untitled">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Optimizer-toolkit.html#Optimizer-toolkit" title="Optimizer toolkit">
<link rel="prev" href="Variable-Stack-Reduction.html#Variable-Stack-Reduction" title="Variable Stack Reduction">
<link rel="next" href="Program-Debugging.html#Program-Debugging" title="Program Debugging">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This file documents the MonetDB Version 5.0 Reference Manual

Last updated: June 5, 2006

     Copyright (C) 2000-2006 CWI

     Permission is granted to make and distribute verbatim
     copies of this manual provided the copyright notice and
     this permission notice are preserved on all copies.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
body { 
    margin: 0px;
    padding: 0px;
}
a,a:visited {
	color: #336633;
}
a:hover {
	color: #003300;
}

p,body {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    text-align: justify;
    font-size: 10pt;
}

h1 {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 14pt;
    font-style: bold;
	text-align: left;
}

td,th {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10pt;
}

div.banner {
	padding: 5px 0px 0px 5px; 
}

div.banner img {
	border: 0px;
	text-decoration: none;
}

div.topmenu {
	margin-top: -20px;
	margin-left: 166px;
	padding: 8px 5px 5px 5px;
	font-size: 8pt;
	background-color: #A9CC99;
}

div.topmenu-bottom {
	margin-top: -4px;
	margin-left: 166px;
	padding: 2px 5px;
	background-color: #BCD2ED; 
}

div.topmenu a {
	padding: 4px 5px 1px 5px;
	text-decoration: none; 
}

div.topmenu a:focus {
	background-color: #6699CC; 
}

div.topmenu a:hover {
	background-color: #5662A0; 
}

/*
span.current {
}
*/

div.topmenu span.current a {
	color: #000000;
	background-color: #BCD2ED; 
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.topmenu span.current a:hover {
	color: #336633;
	background-color: #BCD2ED; 
}

/*
span.submenu {
}
*/

div.topmenu span.submenu a {
	background-color: #CBEEBB;
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.topmenu span.submenu a:hover {
	background-color: #9FB0DB; 
}

div.topmenu span.button {
	margin: 0px 0px 0px 10px;
}

div.topmenu span.button a {
	padding: 5px 6px 1px 6px;
	color: #333333;
	background-color: #FFAC37;
}

div.topmenu span.button a:hover {
	color: #FFFFFF;
}

div.content {
	padding: 5px;
	margin-left: 166px;
	margin-right: 12%;
}

div.header {
	padding: 5px;
	margin-left: 166px;
	margin-right: 12%;
}


div.sidebar-a {
	float: left;
	width: 156px;
	padding: 5px;
	font-size: 8pt;
}

div.sidebar-b { 
	float: right;
	width: 146px;
	margin: 0px 0px 0px 5px;
	padding: 5px;
	font-size: 8pt;
}

div.footer-a {
	float: left;
	width: 156px;
	margin: 5px 0px 0px 0px;
	padding: 5px;
	font-size: 7pt;
	background-color: #CBEEBB;
}

div.footer-a a {
	margin: 5px;
	text-decoration: none; 
}

div.footer-b {
	margin: 5px 0px 0px 0px;
	padding: 5px;
	background-color: #A9CC99;
	font-size: 7pt;
}

div.footer-b a {
	margin: 5px;
	padding: 2px 3px;
	text-decoration: none; 
}
div.footer-b a:focus {
	background-color: #6699CC; 
}
div.footer-b a:hover {
	color: #FFFFFF;
	background-color: #5662A0; 
}
div.footer-b img {
	border: 0px;
	vertical-align: bottom;
	text-decoration: none; 
}

div.news {
	border: 1px solid #666699;
	background-color: #E7E7E7; 
	margin: 3px 0px;
	padding: 5px 5px 5px 5px;
}

div.news li {
	list-style: square;
}

div.submenu-b {
	border: 1px solid #666699;
	background-color: #CBEEBB;
	margin: 3px 0px;
	padding: 5px 5px 5px 5px;
}

div.submenu-b a {
	text-decoration: none; 
	display: block;
	padding: 1px 2px;
	color: #000000;
	background-color: #A9CC99;
}

div.submenu-b a:hover {
	background-color: #BCD2ED; 
}

div.submenu-b ul {
	padding: 1px 0px 1px 0px;
	margin: 0px;
}

div.submenu-b li {
	list-style: none;
	padding: 1px 0px 0px 6px;
}

div.submenu {
	border: 1px solid #666699;
	background-color: #9FB0DB; 
	margin: 3px 0px;
	padding: 5px 5px 5px 5px;
}

div.submenu a {
	text-decoration: none; 
	display: block;
	padding: 1px 2px;
	_width: 100%;
}

div.submenu ul {
	padding: 1px 0px 1px 0px;
	margin: 0px;
}

div.submenu li {
	list-style: none;
	padding: 1px 0px 0px 6px;
}

div.submenu span.submenu a {
	color: #000000;
	background-color: #BCD2ED; 
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.submenu span.submenu a:hover {
	background-color: #A9CC99;
}

div.submenu span.current a {
	background-color: #CBEEBB;
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.submenu span.current a:hover {
	background-color: #CBEEBB;
}

pre.code {
	border: 1px solid Black;
	padding: 4px;
	font-family: monospace;
}
.authors {
	font-size: smaller;
	font-style: italic;
}
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Query-Execution-Plans"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Program-Debugging.html#Program-Debugging">Program Debugging</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Variable-Stack-Reduction.html#Variable-Stack-Reduction">Variable Stack Reduction</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Optimizer-toolkit.html#Optimizer-toolkit">Optimizer toolkit</a>
<hr>
</div>

<h3 class="section">13.17 Query Execution Plans</h3>

<p>A commonly used data structure to represent and manipulate
a query is a tree (or graph). Its nodes represent the
operators and the leaves the operands. 
Such a view comes in handy when you have to re-organize
whole sections of code or to built-up an optimized plan
bottom up, e.g. using a memo structure.

   <p>The MAL optimizer toolkit provides functions to
overlay the body of any MAL block with a tree (graph)
structure and to linearize them back into a MAL block. 
The linearization order is determined by a recursive
descend tree walk from the anchor points in the source program.

   <p>To illustrate, consider the code block:
<pre class="example">     #T1:= bat.new(:int,:int);
     #T2:= bat.new(:int,:int);
     #T3:= bat.new(:int,:int);
     #T4:= bat.new(:int,:int);
     a:= algebra.select(T1,1,3);
     b:= algebra.select(T2,1,3);
     c:= algebra.select(T3,0,5);
     d:= algebra.select(T4,0,5);
     e:= algebra.join(a,c);
     f:= algebra.join(b,d);
     h:= algebra.join(e,f);
     optimizer.dumpQEP();
</pre>
   <p>which produces an indented structure of the query plan.
<pre class="example">     h := algebra.join(e,f);
         e := algebra.join(a,c);
             a := algebra.select(T1,1,3);
                 T1 := bat.new(:int,:int);
             c := algebra.select(T3,0,5);
                 T3 := bat.new(:int,:int);
         f := algebra.join(b,d);
             b := algebra.select(T2,1,3);
                 T2 := bat.new(:int,:int);
             d := algebra.select(T4,0,5);
                 T4 := bat.new(:int,:int);
</pre>
   <p>Any valid MAL routine can be overlayed with a tree (graph)
view based on the flow dependencies, but not all MAL programs
can be derived from a simple tree. For example, the code snippet
above when interpreted as a linear sequence can not be represented
unless the execution order itself becomes an operator node itself.

   <p>However, since we haven't added or changed the original
MAL program, the routine <code>qep.propagate</code> produces
the orginial program, where the linear order has
priority. If, however, we had entered new instructions
into the tree, they would have been placed in close proximity
of the other tree nodes.

   <p>Special care is given to the flow-of-control blocks, because
to produce a query plan section that can not easily be moved
around. 
[give dot examples]
<pre class="example"></pre>
   </body></html>

