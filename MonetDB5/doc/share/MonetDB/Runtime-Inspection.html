<html lang="en">
<head>
<title>Runtime Inspection - Untitled</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Untitled">
<meta name="generator" content="makeinfo 4.8">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Program-Debugging.html#Program-Debugging" title="Program Debugging">
<link rel="prev" href="Handling-Breakpoints.html#Handling-Breakpoints" title="Handling Breakpoints">
<link rel="next" href="Execution-Profiling.html#Execution-Profiling" title="Execution Profiling">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This file documents the MonetDB Version 5.0 Reference Manual

Last updated: June 5, 2006

     Copyright (C) 2000-2006 CWI

     Permission is granted to make and distribute verbatim
     copies of this manual provided the copyright notice and
     this permission notice are preserved on all copies.-->
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc    { font-variant:small-caps }
  span.roman { font-family:serif; font-weight:normal; } 
  span.sansserif { font-family:sans-serif; font-weight:normal; } 
body { 
    margin: 0px;
    padding: 0px;
}
a,a:visited {
	color: #336633;
}
a:hover {
	color: #003300;
}

p,body {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    text-align: justify;
    font-size: 10pt;
}

h1 {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 14pt;
    font-style: bold;
	text-align: left;
}

td,th {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 10pt;
}

div.banner {
	padding: 5px 0px 0px 5px; 
}

div.banner img {
	border: 0px;
	text-decoration: none;
}

div.topmenu {
	margin-top: -20px;
	margin-left: 166px;
	padding: 8px 5px 5px 5px;
	font-size: 8pt;
	background-color: #A9CC99;
}

div.topmenu-bottom {
	margin-top: -4px;
	margin-left: 166px;
	padding: 2px 5px;
	background-color: #BCD2ED; 
}

div.topmenu a {
	padding: 4px 5px 1px 5px;
	text-decoration: none; 
}

div.topmenu a:focus {
	background-color: #6699CC; 
}

div.topmenu a:hover {
	background-color: #5662A0; 
}

/*
span.current {
}
*/

div.topmenu span.current a {
	color: #000000;
	background-color: #BCD2ED; 
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.topmenu span.current a:hover {
	color: #336633;
	background-color: #BCD2ED; 
}

/*
span.submenu {
}
*/

div.topmenu span.submenu a {
	background-color: #CBEEBB;
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.topmenu span.submenu a:hover {
	background-color: #9FB0DB; 
}

div.topmenu span.button {
	margin: 0px 0px 0px 10px;
}

div.topmenu span.button a {
	padding: 5px 6px 1px 6px;
	color: #333333;
	background-color: #FFAC37;
}

div.topmenu span.button a:hover {
	color: #FFFFFF;
}

div.content {
	padding: 5px;
	margin-left: 166px;
	margin-right: 12%;
}

div.header {
	padding: 5px;
	margin-left: 166px;
	margin-right: 12%;
}


div.sidebar-a {
	float: left;
	width: 156px;
	padding: 5px;
	font-size: 8pt;
}

div.sidebar-b { 
	float: right;
	width: 146px;
	margin: 0px 0px 0px 5px;
	padding: 5px;
	font-size: 8pt;
}

div.footer-a {
	float: left;
	width: 156px;
	margin: 5px 0px 0px 0px;
	padding: 5px;
	font-size: 7pt;
	background-color: #CBEEBB;
}

div.footer-a a {
	margin: 5px;
	text-decoration: none; 
}

div.footer-b {
	margin: 5px 0px 0px 0px;
	padding: 5px;
	background-color: #A9CC99;
	font-size: 7pt;
}

div.footer-b a {
	margin: 5px;
	padding: 2px 3px;
	text-decoration: none; 
}
div.footer-b a:focus {
	background-color: #6699CC; 
}
div.footer-b a:hover {
	color: #FFFFFF;
	background-color: #5662A0; 
}
div.footer-b img {
	border: 0px;
	vertical-align: bottom;
	text-decoration: none; 
}

div.news {
	border: 1px solid #666699;
	background-color: #E7E7E7; 
	margin: 3px 0px;
	padding: 5px 5px 5px 5px;
}

div.news li {
	list-style: square;
}

div.submenu-b {
	border: 1px solid #666699;
	background-color: #CBEEBB;
	margin: 3px 0px;
	padding: 5px 5px 5px 5px;
}

div.submenu-b a {
	text-decoration: none; 
	display: block;
	padding: 1px 2px;
	color: #000000;
	background-color: #A9CC99;
}

div.submenu-b a:hover {
	background-color: #BCD2ED; 
}

div.submenu-b ul {
	padding: 1px 0px 1px 0px;
	margin: 0px;
}

div.submenu-b li {
	list-style: none;
	padding: 1px 0px 0px 6px;
}

div.submenu {
	border: 1px solid #666699;
	background-color: #9FB0DB; 
	margin: 3px 0px;
	padding: 5px 5px 5px 5px;
}

div.submenu a {
	text-decoration: none; 
	display: block;
	padding: 1px 2px;
	_width: 100%;
}

div.submenu ul {
	padding: 1px 0px 1px 0px;
	margin: 0px;
}

div.submenu li {
	list-style: none;
	padding: 1px 0px 0px 6px;
}

div.submenu span.submenu a {
	color: #000000;
	background-color: #BCD2ED; 
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.submenu span.submenu a:hover {
	background-color: #A9CC99;
}

div.submenu span.current a {
	background-color: #CBEEBB;
}

/* this should be inherited IMHO, but it doesn't so we just redefine it */
div.submenu span.current a:hover {
	background-color: #CBEEBB;
}

pre.code {
	border: 1px solid Black;
	padding: 4px;
	font-family: monospace;
}
.authors {
	font-size: smaller;
	font-style: italic;
}
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Runtime-Inspection"></a>
Next:&nbsp;<a rel="next" accesskey="n" href="Execution-Profiling.html#Execution-Profiling">Execution Profiling</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Handling-Breakpoints.html#Handling-Breakpoints">Handling Breakpoints</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Program-Debugging.html#Program-Debugging">Program Debugging</a>
<hr>
</div>

<h3 class="section">14.3 Runtime Inspection and Reflection</h3>

<p>Part of the debugger functionality can also be used directly with
MAL instructions. 
The execution trace of a snippet of code can be visualized
encapsulation with <code>mdb.setTrace(true)</code> and <code>mdb.setTrace(false)</code>. 
Likewise, the performance can be monitored with the command <code>mdb.setTimer(on/off)</code>. 
Using a boolean argument makes it easy to control the (performance) trace
at run time. The following snippet shows the effect of patching
the test case.
<pre class="example">     &gt;function test(i:int):str;
     &gt;	mdb.setTrace(true);
     &gt;	io.print(i);
     &gt;	i:= i*2;
     &gt;	b:= bbp.new(:int,:int);
     &gt;	bat.insert(b,1,i);
     &gt;	io.print(b);
     &gt;	mdb.setTrace(false);
     &gt;	return test:= "ok";
     &gt;end test;
     &gt;user.test(1);
     #    mdb.setTrace(_3=true)
     [ 1 ]
     #    io.print(i=1)
     #    i := calc.*(i=2, _5=2)
     #    b := bbp.new(_7=0, _8=0)
     #    bat.insert(b=&lt;tmp_1226&gt;, _10=1, i=2)
     #-----------------#
     # h     t         # name
     # int   int       # type
     #-----------------#
     [ 1,      2       ]
     #    io.print(b=&lt;tmp_1226&gt;)
     #   261 usec!    user.test(_2=1)
     &gt;
</pre>
   <p>The command setTimer() produces timing statistics in micro-seconds. 
Aside from the time spent in each statement
separately, it accumulate the timeing for the complete call. 
The time spent on preparing the trace information is excluded
from the time reported. 
For more detailed timing information the Linux
tool <em>valgrind</em> may be of help.

<pre class="example">     &gt;function test(i:int):str;
     &gt;	mdb.setTimer(true);
     &gt;	io.print(i);
     &gt;	i:= i*2;
     &gt;	b:= bbp.new(:int,:int);
     &gt;	bat.insert(b,1,i);
     &gt;	io.print(b);
     &gt;	mdb.setTimer(false);
     &gt;	return test:= "ok";
     &gt;end test;
     &gt;user.test(1);
     #     6 usec#    mdb.setTimer(_3=true)
     [ 1 ]
     #    43 usec#    io.print(i=1)
     #     5 usec#    i := calc.*(i=2, _5=2)
     #    24 usec#    b := bbp.new(_7=0, _8=0)
     #    10 usec#    bat.insert(b=&lt;tmp_1226&gt;, _10=1, i=2)
     #-----------------#
     # h     t         # name
     # int   int       # type
     #-----------------#
     [ 1,      2       ]
     #   172 usec#    io.print(b=&lt;tmp_1226&gt;)
     #   261 usec#    user.test(_2=1)
</pre>
   <p>It is also possible to activate the debugger from within a program
using <code>mdb.start()</code>. It remains in this mode until
you either issue a quit command, or the command mdb.stop() instruction is
encountered. 
The debugger is only activated when the user can direct its execution
from the client interface. Otherwise, there is no proper input channel
and the debugger will run in trace mode.

   <p>The program listing functionality of the debugger is
also captured in the MAL debugger module. The current code
block can be listed using <code>mdb.list()</code> and <code>mdb.List()</code>. 
An arbitrary code block can be shown with  <code>mdb.list</code>(<em>module</em>,<em>function</em>)
and <code>mdb.List</code>(<em>module</em>,<em>function</em>). 
A BAT representation of the current function is return by <code>mdb.getDefinition()</code>.

   <p>The symbol table and stack content, if available, can be shown with
the operations <code>mdb.var()</code> and <code>mdb.list</code>(<em>module</em>,<em>function</em>)
Access to the stack frames may be helpful in the context of exception handling. 
The operation <code>mdb.getStackDepth()</code> gives the depth and individual
elements can be accessed as BATs using <code>mdb.getStackFrame(</code><em>n</em><code>)</code>. 
The top stack frame is accessed using <code>mdb.getStackFrame()</code>.

   </body></html>

