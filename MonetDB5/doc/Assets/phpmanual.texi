@subsection MonetDB PHP Library

The MonetDB distribution comes with a <a href="../C">MAPI</a> based interface 
for <a href=http://www.php.net>php</a>. It consists of 2 parts the dynamically
loadable php module, MonetDB.so/dll and a driver for the <a href="http://pear.php.net/package/DB">PEAR DB</a> abstraction interface, MonetDB.php. 

@subsubsection Compilation

For general compilation of MonetDB see the howto's for 
<a href="_ROOTURL_/MonetDB/Version4/Documentation/Installation/Unix/index.html">Unix</a>
and <a href="_ROOTURL_/MonetDB/Version4/Documentation/Installation/Windows/index.html">Windows</a>.
The unix configure process normally tries to detect if you have php 
including developer packages installed and builds the php module only 
if you have it.  With the @code{--with-php} option you could tell 'configure' 
where to find the php installation.


For windows setups the story is a little bit more complex.
TODO


@subsubsection Installation
When the build process is complete you should have a php extension_dir under
your MonetDB prefix directory. Usually this is prefix/lib/php4.
Besides this binary module the pear db driver should be installed under
prefix/php_peardir/db, which usually is prefix/share/pear/db.
Depending on your local setup you could now use these files by coping them
into the system extension_dir and php_peardir or with a private webserver
you could simply reset the environment variables, include_path and
extension_dir. For example you could have a php.ini file which has the following
php section.

@example
[PHP]
safe_mode = Off
safe_mode_gid = Off
include_path = ".:/opt/MonetDB-4.6/share/pear:/usr/share/pear"
extension_dir = /opt/MonetDB-4.6/lib/php4
@end example

A tiny example of the use the MonetDB php module follows:

@verbatim
<?php

# if monetdb.php isn't installed into the correct pear/DB directory
# we load first 
#require("DB/monetdb.php");
require("DB.php");

function printtable($resultset) {
    echo "<table border='1'>";
    echo "<tr>";
    foreach(array_keys($resultset[0]) as $head) 
	echo "<th>".ucfirst($head)."</th>";
    echo "</tr>";
    
    foreach($resultset as $row) {
	echo "<tr&>";
	foreach($row as $k=&>$v)
	echo "</tr&>";
    } 
    echo "</table&>";
}

// Connect to monet giving a user/password/host; default language is SQL. 
$db = DB::connect("monetdb://monetdb:monetdb@@localhost/");
$db->setFetchMode(DB_FETCHMODE_ASSOC);
$db->autoCommit(false);

$db->query("CREATE TABLE testtable (name VARCHAR(255), zipcode VARCHAR(10), registered BOOLEAN);");
$db->query("INSERT INTO testtable VALUES('Arjan Scherpenisse', '1092 GJ', true);");
$db->query("INSERT INTO testtable VALUES('Test', '123', false);");

// Get table names
$tables = $db->getCol($db->getSpecialQuery("tables")); 

echo "<p>The following tables are defined: <strong>" . implode(", ", $tables) . "</strong>";

echo "<p>Contents of testtable:";
$all = $db->getAll("SELECT * FROM testtable;");
printtable($all);
 
$db->disconnect();

?>
@end verbatim

More examples can be found in the sources. 

The PEAR::DB driver is based on the MonetDB php module which can
ofcourse also be used directly.  
Check out the @url{"www.monetdb.com/MonetDB/Version5//phpdoc",PHPdoc documentation} for these functions.
