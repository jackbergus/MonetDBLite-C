@menu
* Extended XPath Steps::
* Availability::
* Why StandOff Extensions?:: 
@end menu
XML is often used to store annotations (i.e. meta-data, data describing
other data). In particular, XML @strong{Standoff Annotation}, concern 
annotations that annotate some object that itself is @strong{not} included
in the XML document. Such StandOff annotation often refers to @emph{regions}
in this object. We support a form of XML annotations that denotes these
regions as XML node attributes called @code{start} and @code{end}.

Consider, for example, a video file (documentary) annotated 
as follows:

@verbatim
<sample>
 <video>
  <scene id="Intro" start="0" end="800"/>
  <scene id="Interview" start="801" end="10400"/>
  <scene id="Outro" start="10401" end="13400"/>
 </video>
 <music>
  <song artist="Beatles" start="0" end="4500"/>
  <song artist="Bach" start="10000" end="13000"/>
 </music>
</sample>
@end verbatim

On the above example XML file (multimedia case), one may want to ask which 
music was played during the interview.  In that case, we want @code{song} 
elements whose regions @emph{overlap} with the Interview @code{shot}.
Without StandOff extensions, such queries are tedious to express in XQuery,
and perform very slowly.

with StandOff extensions, the query can be posed as follows:
@verbatim
doc("example.xml")//scene[@id="Interview"]/select-wide::song
@end verbatim
Note the @code{select-wide} is an extension of the XPath (and thus XQuery) syntax.


@node Extended XPath Steps, Availability , StandOff Extensions, StandOff Extensions
@subsection Extended XPath Steps for Region Querying
The StandOff axis steps, similar in behavior to the standard
XPath steps (e.g. @code{child::*}, @code{descendant::*})
have been added to MonetDB/XQuery to make querying
concurrent such region really easy.

@itemize
@item @code{/select-narrow::}
@item @code{/select-wide::}
@item @code{/reject-narrow::}
@item @code{/reject-wide::}
@end itemize

@itemize
  @item Axis steps will always be 'local' e.g. will only yield
      matches from the same document (fragment).
  @item Each node is only returned once (no duplicates) and in 
      document order.
@end itemize


@subsubsection context/select-narrow::nodename
From the set of nodes with nodename `nodename', say: @{n1, n2...@}, 
return only the nodes contained in the context nodes (e.g. 
return n if there is a context node for which holds: context_start 
<= n_start and n_end <= context_end)


@subsubsection context/select-wide::nodename
From the set of nodes with nodename `nodename', say: @{n1, n2...@},
return only the nodes overlapping with the context nodes (e.g. 
return n if there is a context node for which holds: context_start 
<= n_end and n_start <= context_end)

@subsubsection context/reject-narrow::nodename
From the set of nodes with nodename `nodename', say: @{n1, n2...@}, 
return all BUT the nodes contained in the context nodes (e.g. 
return n if there is NO context node for which holds: context_start 
<= n_start and n_end <= context_end)

@subsubsection context/reject-wide::nodename
From the set of nodes with nodename `nodename', say: @{n1, n2...@}, 
return all BUT the nodes overlapping with the context nodes (e.g. 
return n if there is NO context node for which holds: context_start 
<= n_end and n_start <= context_end)

@node Availability, Why StandOff Extensions? ,Extended XPath Steps, StandOff Extensions
@subsection Availability
The steps have been made available in MonetDB/XQuery 
  next to the regular XPath axis.
  The StandOff steps have been @strong{turned off by default}
  as they do not follow the XQuery recommendation as set by the W3C. 
  To @emph{enable} the steps you need to start the database server 
  (Mserver) with the option @code{--set standoff=enable}.

Inside the server, the StandOff steps are
implemented efficiently using sophisticated @emph{interval-join} algorithms, 
as well as a @emph{temporal index}. Both are employed automatically by
MonetDB/XQuery, without need of user or DBA intervention.
The @url{http://www.cwi.nl/htbin/ins1/publications?request=intabstract&key=AlBhVrBo:XIMEP:06">XIME-P 2006}
paper from our scientific library gives technical background on these StandOff extensions.


@node Why StandOff Extensions? , Programming Interfaces, Availability, StandOff Extensions
@subsection Why Extending the XPath Standard?
We have found a surprising wide variety of XML data owners
to have region annotations:
@itemize
@item @url{http://www.cwi.nl/htbin/ins1/publications?request=intabstract&key=AlBhVrBo:XIMEP:06, Standoff In Multimedia}: XML that holds the output of video scene detection or speech recognition tools (etc.).
Used in various kinds of content-based multimedia search/browsing systems.

@item @url{http://www.cwi.nl/htbin/ins1/publications?request=intabstract&key=AlBhVrBo:DFRWS:06, Standoff In Forensic}:
XML describing interesting features discovered on confiscated hard drives 
(e.g. person names, addresses, emails, recovered file hierarchies, etc..).
The regions refer to the positions on disk where the features where found.
Used in computer-assisted crime scene investigations (CSI).

@item @url{http://www.cwi.nl/htbin/ins1/publications?request=intabstract&key=AlJiAhRiBoVr:NLPXML:06, Standoff In NLP}:
XML describing the grammatical structure of natural texts. 
Inline annotation cannot be used because natural language is ambiguous, and multiple parses
are often possible. Thus structure is separated from content, and refers to it by word position.
Used in automatic question answering systems.

@item @url{http://mad-db.science.uva.nl:10080/MADfiles/ECCBPoster.pdf,
       Standoff In Bio-Informatics}:
XML storing DNA sequences annotated by genome research groups.
The regions refer by position in the DNA strands.
The annotations may contain clinical characteristics of patients or hold additional
biomolecular data on those genes.
Used in collaborative genome research efforts.

@end itemize
If you have similar XML data and use MonetDB/XQuery to manage this, please 
contact us on the @url{http://lists.sourceforge.net/lists/listinfo/monetdb-users,mailing list}.

For XQueries with such region overlap/containment conditions, other XML database systems 
resort to query plans that have to compare all pairs of regions ("quadratic complexity"). 
On XML data sizes above a few hundred KB, this quickly systems become unusably slow. 
In contrast, MonetDB/XQuery with StandOff extentions runs bio-informatics queries on gigabytes 
of XML annotations within a few seconds.





