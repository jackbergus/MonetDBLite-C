include mal_compiler;
function tst903();
    b:= bat.new(:void,:lng);
    barrier (go,i):= language.newRange(0:lng);
        k:= mmath.rand();
        l:= calc.lng(k);
        bat.insert(b,nil,l);
        redo (go,i):= language.nextElement(1:lng,1000000:lng);
    exit (go,i);
end tst903;

t0:= alarm.usec();
user.tst903();
t1:= alarm.usec();
t1:= t1-t0;
io.printf("#timing %d\n",t1);

compiler.MALtoC("user","tst903","mal01");
compiler.mcc("mal01");
compiler.load("user","tst903","mal01");

t0:= alarm.usec();
user.tst903();
t1:= alarm.usec();
t1:= t1-t0;
io.printf("#timing %d\n",t1);
