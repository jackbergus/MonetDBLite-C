include mal_compiler;
function tst903();
    b:= bat.new(:oid,:lng);
    barrier i:= 0:lng;
        k:= mmath.rand();
        l:= calc.lng(k);
        bat.append(b,l);
        redo i:= iterator.next(1:lng,1000000:lng);
    exit i;
end tst903;

t0:= alarm.usec();
user.tst903();
t1:= alarm.usec();
t1:= t1-t0;
io.printf("#timing %d\n",t1);

compiler.MALtoC("user","tst903","mal01");
compiler.mcc("mal01");
compiler.load("user","tst903","mal01");

t0:= alarm.usec();
user.tst903();
t1:= alarm.usec();
t1:= t1-t0;
io.printf("#timing %d\n",t1);
