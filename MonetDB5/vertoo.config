# -*- mode: python -*-
addScheme('normal', '%major.%minor.%release')

main = addModule('MonetDB5')
monetdb = addModule('MonetDB')
clients = addModule('clients')


# %v - unadorned version number
# %q - version number surrounded by single quotes
# %Q - version number surrounded by double quotes

main.setVersionFormat('@normal%[rc?%rc%build:]')
main.addAnchor("VERSION", "%v")
main.addAnchor("configure.ag", "[MonetDB Server], [%v]")
main.addAnchor("conf/monetdb5.conf.in", "gdk_version=%v")
main.addAnchor("src/mal/Tests/performanceTests/perf.conf", "gdk_version=%v")
main.addAnchor("NT/rules.msc", "VERSION=%v")
main.addAnchors("NT/MonetDB5-Installer/MonetDB5-Installer.vdproj",
               	arguments(pattern = "\"ProductVersion\" = \"8:%v\"",
                          format = '@normal'))

monetdb.setVersionFormat('@normal%[rc?%rc%build:]')
monetdb.addAnchor("configure.ag", "req_monetdb_ver=%q")

clients.setVersionFormat('@normal%[rc?%rc%build:]')
clients.addAnchor("configure.ag", "req_clients_ver=%q")
