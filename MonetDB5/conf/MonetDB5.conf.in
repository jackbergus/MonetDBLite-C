# Configuration file for MonetDB Version 5 server

# The configuration file is an integral part of a database store
# and aimed to initialize the server and service components.
# This startup file is read by the GDK kernel to set system wide parameters.

# It may be inspected by application/scripts for specific settings,
# but such client side configurations are better packed in their
# own structure.

# It can also reside in the local directory
# where mserver is called, or the home directory of the MonetDB user.

# Absolute path where MonetDB is installed
prefix=@prefix@
exec_prefix=@exec_prefix@

# GDK Section
#============
# All databases are stored as a directory under the directory
# given below.  Use this value to change the overall location
# of your data.
gdk_dbfarm=@localstatedir@@DIRSEP@@PACKAGE@@DIRSEP@dbfarm

# MonetDB can only handle one database at a time.  When you start an
# mserver5 manually without specifying the database name yourself, the
# following database name is used.
gdk_dbname=demo

# The options below deal with various aspects of memory usage behaviour.
# If you don't know what these values mean, you should leave them alone.

# gdk_mem_bigsize & gdk_vm_minsize will be set/limited to
# 1/2 of the physically available amount of main-memory
# during start-up in src/tools/mserver.mx
# memory chunks of size >= gdk_mem_bigsize (in bytes) will be mmaped anonymously
#gdk_mem_bigsize=262144
# memory chunks of size >= gdk_vm_minsize (in bytes) will be mmaped;
#gdk_vm_minsize=137438953472
# for 32 bit systems try to claim 3G of (virtual) memory;
#gdk_vmtrim=yes
# set to "no" to disable the vmtrim thread.

# valgrind issues:
# for 32 bit systems it tries claim 3G of (virtual) memory
# set the alloca map to "no" to run mserver with valgrind;
# also, you need to tell valgrind to use 8-byte alignment, hence:
# "valgrind --alignment=8 mserver --set gdk_alloc_map=no ..."
gdk_alloc_map=no

# the kernel can be used in embedded situations (don't set this yourself)
gdk_embedded=no

# You can enable debug for specific parts.  By default debug is
# switched off.
gdk_debug=0
# possible values: (can be a combination of)
#       1 = thread-specific debug output
#       2 = CHECKMASK    = property enforcing on new BATs
#       4 = MEMMASK      = memory allocation
#       8 = PROPMASK     = property checking on all values: tells about
#                          wrongly set properties
#      16 = IOMASK       = major IO activity
#      32 = BATMASK      = BAT handling
#      64 = PARSEMASK    = parser debugging
#     128 = PARMASK      = Thread management
#     256 = TRGMASK      = Event management 
#     512 = TMMASK       = Transaction management
#    1024 = TEMMASK      = Locks and Triggers
#    2048 = DLMASK       = Dynamic loading
#    4096 = PERFMASK     = BBP Performance (?)
#    8192 = DELTAMASK    = Delta debugging (?)
#   16384 = LOADMASK     = Module loading
#   32768 = YACCMASK     = Yacc specific error messages
#   65536 = obsolete     = tcpip (??)
#  131072 = obsolete     = monet_multiplex: setaggr debugging (??)
#  262144 = obsolete     = \
#  524288 = obsolete     =   ddbench (???)
# 1048576 = obsolete     = /
# 2097152 = ALGOMASK     = show join/select algorithm chosen
# 4194304 = ESTIMASK     = show result size estimations (for join,select)
# 8388608 = XPROPMASK    = extended property checking: tells also about
#                          not set properties
#16777216 = JOINPROPMASK = disable property checking with join & outerjoin
#                          (e.g., for performance measurements)
#33554432 = DEADBEEFMASK = disable "cleaning" of freed memory in GDKfree()
#                          (e.g., for performance measurements)
# 
# Mserver 5 recognizes a series of command line names instead:
# --threads ( 1 | PARMASK)
# --memory (MEMMASK )
# --properties (CHECKMASK | PROPMASK | BATMASK )
# --io (IOMASK | PERFMASK )
# --transactions ( TMMASK | DELTAMASK | TEMMASK)
# --modules (DLMASK | LOADMASK)
# --algorithms (ALGOMASK | ESTIMASK)
# --xproperties (XPROPMASK )
# --performance (JOINPROPMASK | DEADBEEFMASK)


# Monet Section
#==============
# monet_admin=adm			#administrator user name
# Prompt when using MAL interface
# monet_prompt=>
# Where do the MonetDB modules reside? The second path is for windows dlls.
monet_mod_path=@libdir@@DIRSEP@@PACKAGE@@PATHSEP@@libdir@@DIRSEP@@PACKAGE@@DIRSEP@lib@PATHSEP@@libdir@@DIRSEP@@PACKAGE@@DIRSEP@bin
# Start mserver in daemon mode, or start with MAL interactive interface?
monet_daemon=no
# Display version and copyright information upon startup?
monet_welcome=yes
# Where is the file that stores the secret key to unlock the password
# vault?  The file is read up to the first null-byte ('\0'), so you can
# padd the file with trailing null-bytes to obfuscate the key length.
# You can easily generate some key by running pwgen and adding a few of
# the passwords generated.  Make sure not to make the key too small.
# If you leave this unset, some default key is used.
# If you use Merovingian, a per-database vault key is used and this
# setting ignored.
#monet_vault_key=@sysconfdir@@DIRSEP@monetdb.secret

# Merovingian section
#====================================
# Merovingian logs messages and errors by default to the stdout and
# stderr channels on the console.  By setting one or both of the
# variables below, one can specify messages and/or errors to be logged
# to a file instead.  It is legitimate to have both mero_msglog and
# mero_errlog pointing to the same file, as in the default below.
# Unsetting below defaults will make merovingian log to the screen.
mero_msglog=@localstatedir@@DIRSEP@log@DIRSEP@merovingian.log
mero_errlog=@localstatedir@@DIRSEP@log@DIRSEP@merovingian.log
#
# Log messages may not be instantly logged, because the process that
# writes the message does not flush its buffered stream.  Since
# Merovingian cannot force other processes to flush their output, the
# time when Merovingian receives the message need not to be (close) to
# the actual time the message was generated.  For this reason it makes
# not much sense to tag each line with the time it is printed by
# Merovingian.  Instead, Merovingian does a rough time indication by
# inserting TME records in the log output.  The seconds interval in
# which Merovingian should print such TME record can be specified below.
# Note that an interval of 0 makes Merovingian print a TME record for
# every printed log record.  The default is to print a TME record every
# 10 minutes.
mero_timeinterval=600
#
# Merovingian forks itself to detach into the background.  It stores its
# pid in the following file, which can be used to stop Merovingian
# again.
mero_pidfile=@localstatedir@@DIRSEP@run@DIRSEP@merovingian.pid
#
# In normal use, Merovingian replaces an mserver, and hence listens for
# connections on the same port as an mserver would do.  For certain
# configs, however, it may be more suitable to use an alternate port,
# which can be specified here.
#mero_port=50000
#
# mservers that were started by Merovingian are shut down when the
# Merovingian is shut down.  This behaviour is desirable if the
# Merovingian is ran as daemon process that represents MonetDB, such as
# in an init.d script.  Setting the time-out value below to a positive
# non-zero value will shut down each mserver that was started with a
# given time-out in seconds.  If the time-out expires, the mserver is
# killed using the SIGKILL signal.  A time-out value of 0 means that no
# mserver is shut down, meaning they will live on after the Merovingian
# has shut down.  The default is to shut down all started mservers with
# a time-out of 7 seconds.
mero_exittimeout=7

# MAL section
# Monet Virtual Machine
#====================================
mal_init=@libdir@@DIRSEP@@PACKAGE@/mal_init.mal
mal_listing = 15           # List everything
#    1 = List the original input
#    2 = List the MAL instruction
#    4 = List the MAL type information
#    8 = List the MAL properties

# Checkpoint and recovery
#===================================
# Checkpoints are stored in their own area, preferrably
# on a different storage device. Checkpoints should be
# initialized manually.
checkpoint_dir=@localstatedir@@DIRSEP@@PACKAGE@@DIRSEP@chkpnt

# Monet Application Interface Section
#====================================
mapi_port=0         # default port to address a mserver
mapi_open=false     # should be set to 'true' to allow for 
                    # remote access to a server

# SQL Interface Section
#====================================
# The SQL debug level (should be disabled for normal use)
sql_debug=0

# Place to store transaction logs
# The logs are typically stored on a different storage medium
# to protect the database against accidental hardware loss.
sql_logdir=@localstatedir@@DIRSEP@@PACKAGE@@DIRSEP@sql_logs

# The sql_init is a comma separated list of sql files to be
# executed upon system restart. It is primarily used to make
# SQL library functions known to all users.
sql_init=@libdir@@DIRSEP@@PACKAGE@/sql_init.sql
