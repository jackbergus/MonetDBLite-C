# Monet Mil to Mal compiler
# Copyright (c) 2001-2004, CWI. All rights reserved.

#Predefined code segment
#The compiler can not guarantee an accurate compilation,
#because MIL unlike MAL is a dynamically typed language.
#A few guidelines to maximize usefullness.
#- make the type of variables explicit, in particular 'nil'
#- upon advice of M2m to remap identifiers, change it in your program directly
#use the "mil_schema" for additional support routines
#	io.print("# \n");
#	io.print("# >Number:         164\n");
#	io.print("# >Category:       MIL\n");
#	io.print("# >Synopsis:       BATcheck in heapclustercopy (module cluster) fails\n");
#	io.print("# >Confidential:   no\n");
#	io.print("# >Severity:       serious\n");
#	io.print("# >Priority:       medium\n");
#	io.print("# >Responsible:    boncz (Peter Boncz)\n");
#	io.print("# >State:          open\n");
#	io.print("# >Class:          sw-bug\n");
#	io.print("# >Submitter-Id:   unknown\n");
#	io.print("# >Arrival-Date:   Wed Aug 12 14:54:49 1998\n");
#	io.print("# >Originator:     manegold@cwi.nl\n");
#	io.print("# >Organization:\n");
#	io.print("# CWI\n");
#	io.print("# >Release:        980101\n");
#	io.print("# >Environment:\n");
#	io.print("# any\n");
#	io.print("# >Description:\n");
#	io.print("# heapclustercopy fails with\n");
#	io.print("# !ERROR: CLUSTERcopyheap: BAT 2: BAT required.\n");
#	io.print("# !ERROR: CMDheapclustercopy: operation failed.\n");
#	io.print("# \n");
#	io.print("# ========\n");
#	io.print("# test.script\n");
#	io.print("# --------\n");
#	io.print("# a:=new(int,str);    \n");
#	io.print("# a.insert(1,\"A\");\n");
#	io.print("# a.insert(2,\"B\");\n");
#	io.print("# a.insert(3,\"C\");\n");
#	io.print("# b:=new(int,str);\n");
#	io.print("# b.insert(3,\"A\");\n");
#	io.print("# b.insert(2,\"B\");\n");
#	io.print("# b.insert(1,\"C\");\n");
#	io.print("# table(a,b);\n");
#	io.print("# module(\"cluster\");\n");
#	io.print("# a.heapclustercopy(b);\n");
#	io.print("# table(a,b);\n");
#	io.print("# heapclustercopy(a,b);\n");
#	io.print("# table(a,b);\n");
#	io.print("# b.heapclustercopy(a);\n");
#	io.print("# table(a,b);\n");
#	io.print("# heapclustercopy(b,a);\n");
#	io.print("# table(a,b);\n");
#	io.print("# quit;\n");
#	io.print("# \n");
#	io.print("# ========\n");
#	io.print("# output\n");
#	io.print("# --------\n");
#	io.print("# # Monet Database Server V4.0\n");
#	io.print("# # Copyright (c) 1993-1998, CWI & SION. All rights reserved.\n");
#	io.print("# # compiled for IRIX5.3/32bit on Wed Aug 12 00:27:12 MET DST 1998.\n");
#	io.print("# #script:bug.mil\n");
#	io.print("# \n");
#	io.print("# loaded;\n");
#	io.print("# #---------------------------------#\n");
#	io.print("# # module        | usage_count     #\n");
#	io.print("# #---------------------------------#\n");
#	io.print("# [ \"kernel\",       1               ]\n");
#	io.print("# [ \"arith\",        1               ]\n");
#	io.print("# [ \"bat\",          1               ]\n");
#	io.print("# [ \"algebra\",      1               ]\n");
#	io.print("# [ \"sys\",          1               ]\n");
#	io.print("# [ \"trans\",        1               ]\n");
#	io.print("# \n");
#	io.print("# Try: modules;                - for other modules.\n");
#	io.print("#      ls;                     - for persistent bat listing.\n");
#	io.print("#      sigs(\"<module>\")        - for available commands per module.\n");
#	io.print("#      help(\"<command>\")       - for help one-liner for a command.\n");
#	io.print("# \n");
#	io.print("# #You are system administrator (adm)!\n");
#	io.print("# a:=new(int,str);    \n");
#	io.print("# a.insert(1,\"A\");\n");
#	io.print("# a.insert(2,\"B\");\n");
#	io.print("# a.insert(3,\"C\");\n");
#	io.print("# b:=new(int,str);\n");
#	io.print("# b.insert(3,\"A\");\n");
#	io.print("# b.insert(2,\"B\");\n");
#	io.print("# b.insert(1,\"C\");\n");
#	io.print("# table(a,b);\n");
#	io.print("# #-----------------#\n");
#	io.print("# # tmp_23| tmp_24  #\n");
#	io.print("# #-----------------#\n");
#	io.print("# [ \"A\",    \"C\"     ]\n");
#	io.print("# [ \"B\",    \"B\"     ]\n");
#	io.print("# [ \"C\",    \"A\"     ]\n");
#	io.print("# module(\"cluster\");\n");
#	io.print("# a.heapclustercopy(b);\n");
#	io.print("# !ERROR: CLUSTERcopyheap: BAT 2: BAT required.\n");
#	io.print("# !ERROR: CMDheapclustercopy: operation failed.\n");
#	io.print("# table(a,b);\n");
#	io.print("# #-----------------#\n");
#	io.print("# # tmp_23| tmp_24  #\n");
#	io.print("# #-----------------#\n");
#	io.print("# [ \"A\",    \"C\"     ]\n");
#	io.print("# [ \"B\",    \"B\"     ]\n");
#	io.print("# [ \"C\",    \"A\"     ]\n");
#	io.print("# heapclustercopy(a,b);\n");
#	io.print("# !ERROR: CLUSTERcopyheap: BAT 2: BAT required.\n");
#	io.print("# !ERROR: CMDheapclustercopy: operation failed.\n");
#	io.print("# table(a,b);\n");
#	io.print("# #-----------------#\n");
#	io.print("# # tmp_23| tmp_24  #\n");
#	io.print("# #-----------------#\n");
#	io.print("# [ \"A\",    \"C\"     ]\n");
#	io.print("# [ \"B\",    \"B\"     ]\n");
#	io.print("# [ \"C\",    \"A\"     ]\n");
#	io.print("# b.heapclustercopy(a);\n");
#	io.print("# !ERROR: CLUSTERcopyheap: BAT 2: BAT required.\n");
#	io.print("# !ERROR: CMDheapclustercopy: operation failed.\n");
#	io.print("# table(a,b);\n");
#	io.print("# #-----------------#\n");
#	io.print("# # tmp_23| tmp_24  #\n");
#	io.print("# #-----------------#\n");
#	io.print("# [ \"A\",    \"C\"     ]\n");
#	io.print("# [ \"B\",    \"B\"     ]\n");
#	io.print("# [ \"C\",    \"A\"     ]\n");
#	io.print("# heapclustercopy(b,a);\n");
#	io.print("# !ERROR: CLUSTERcopyheap: BAT 2: BAT required.\n");
#	io.print("# !ERROR: CMDheapclustercopy: operation failed.\n");
#	io.print("# table(a,b);\n");
#	io.print("# #-----------------#\n");
#	io.print("# # tmp_23| tmp_24  #\n");
#	io.print("# #-----------------#\n");
#	io.print("# [ \"A\",    \"C\"     ]\n");
#	io.print("# [ \"B\",    \"B\"     ]\n");
#	io.print("# [ \"C\",    \"A\"     ]\n");
#	io.print("# quit;\n");
#	io.print("# \n");
#	io.print("# ========\n");
#	io.print("setoid(oid(20000000));");
	aa_a := calc.oid(20000000);
	ba_a := setoid(aa_a);
#	io.print("var a:=new(int,str);    ");
	a := bbp.new(nil:int,nil:str);
#	io.print("a.insert(1,\"A\");");
	ca_a := bat.insert(a,1,"A");
#	io.print("a.insert(2,\"B\");");
	da_a := bat.insert(a,2,"B");
#	io.print("a.insert(3,\"C\");");
	ea_a := bat.insert(a,3,"C");
#	io.print("var b:=new(int,str);");
	b := bbp.new(nil:int,nil:str);
#	io.print("b.insert(3,\"A\");");
	fa_a := bat.insert(b,3,"A");
#	io.print("b.insert(2,\"B\");");
	ga_a := bat.insert(b,2,"B");
#	io.print("b.insert(1,\"C\");");
	ha_a := bat.insert(b,1,"C");
#	io.print("table(a,b);");
	ia_a := table(a,b);
#	io.print("a.heapclustercopy(b);");
	ja_a := heapclustercopy(a,b);
#	io.print("table(a,b);");
	ka_a := table(a,b);
#	io.print("heapclustercopy(a,b);");
	la_a := heapclustercopy(a,b);
#	io.print("table(a,b);");
	ma_a := table(a,b);
#	io.print("b.heapclustercopy(a);");
	na_a := heapclustercopy(b,a);
#	io.print("table(a,b);");
	oa_a := table(a,b);
#	io.print("heapclustercopy(b,a);");
	pa_a := heapclustercopy(b,a);
#	io.print("table(a,b);");
	qa_a := table(a,b);
#	io.print("quit();");
	ra_a := clients.quit();
