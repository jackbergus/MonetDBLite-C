# Monet Mil to Mal compiler
#include mil;
# Copyright (c) 2001-2004, CWI. All rights reserved.

#Predefined code segment
#The compiler can not guarantee an accurate compilation,
#because MIL unlike MAL is a dynamically typed language.
#A few guidelines to maximize usefullness.
#- make the type of variables explicit, in particular 'nil'
#- upon advice of M2m to remap identifiers, change it in your program directly
#use the "mil_schema" for additional support routines
#	mil.line("# >Number:         147\n");
#	mil.line("# >Category:       Module_sys\n");
#	mil.line("# >Synopsis:       view_gdk_thread() crashes\n");
#	mil.line("# >Confidential:   no\n");
#	mil.line("# >Severity:       serious\n");
#	mil.line("# >Priority:       medium\n");
#	mil.line("# >Responsible:    mk (Martin Kersten)\n");
#	mil.line("# >State:          closed\n");
#	mil.line("# >Class:          sw-bug\n");
#	mil.line("# >Submitter-Id:   unknown\n");
#	mil.line("# >Arrival-Date:   Mon Mar  9 16:10:23 1998\n");
#	mil.line("# >Originator:     manegold@cwi.nl\n");
#	mil.line("# >Organization:\n");
#	mil.line("# >Release:        980101\n");
#	mil.line("# >Environment:\n");
#	mil.line("# SunOS5.6 (GNU=OFF) & SunOS5.5 (GNU=ON)\n");
#	mil.line("# >Description:\n");
#	mil.line("# ================\n");
#	mil.line("# Test script:\n");
#	mil.line("# ----------------\n");
#	mil.line("# threads();\n");
#	mil.line("# view_gdk_thread().print();\n");
#	mil.line("# #1\n");
#	mil.line("# threadcnt(1);\n");
#	mil.line("# threads();\n");
#	mil.line("# view_gdk_thread().print();\n");
#	mil.line("# #2\n");
#	mil.line("# threadcnt(1);\n");
#	mil.line("# threads();\n");
#	mil.line("# view_gdk_thread().print();\n");
#	mil.line("# #3\n");
#	mil.line("# threadcnt(1);\n");
#	mil.line("# threads();\n");
#	mil.line("# view_gdk_thread().print();\n");
#	mil.line("# #4\n");
#	mil.line("# threadcnt(1);\n");
#	mil.line("# threads();\n");
#	mil.line("# view_gdk_thread().print();\n");
#	mil.line("# #5\n");
#	mil.line("# threadcnt(1);\n");
#	mil.line("# threads();\n");
#	mil.line("# view_gdk_thread().print();\n");
#	mil.line("# quit;\n");
#	mil.line("# \n");
#	mil.line("# ================\n");
#	mil.line("# output\n");
#	mil.line("# ----------------\n");
#	mil.line("# [...]#You are system administrator (adm)!\n");
#	mil.line("# threads();\n");
#	mil.line("# #---------------------------------#\n");
#	mil.line("# # int   | thread                  #\n");
#	mil.line("# #---------------------------------#\n");
#	mil.line("# [ 1,      \"Server\"                ]\n");
#	mil.line("# [ 4,      \"Interpreter\"           ]\n");
#	mil.line("# [ 5,      \"InternetServer\"        ]\n");
#	mil.line("# view_gdk_thread().print();\n");
#	mil.line("# #---------------------------------#\n");
#	mil.line("# # int   | thread                  #\n");
#	mil.line("# #---------------------------------#\n");
#	mil.line("# [ 1,      \"Server\"                ]\n");
#	mil.line("# [ 4,      \"Interpreter\"           ]\n");
#	mil.line("# [ 5,      \"InternetServer\"        ]\n");
#	mil.line("# #1\n");
#	mil.line("# threadcnt(1);\n");
#	mil.line("# threads();\n");
#	mil.line("# #---------------------------------#\n");
#	mil.line("# # int   | thread                  #\n");
#	mil.line("# #---------------------------------#\n");
#	mil.line("# [ 1,      \"Server\"                ]\n");
#	mil.line("# [ 4,      \"Interpreter\"           ]\n");
#	mil.line("# [ 5,      \"InternetServer\"        ]\n");
#	mil.line("# view_gdk_thread().print();\n");
#	mil.line("# #---------------------------------#\n");
#	mil.line("# # int   | thread                  #\n");
#	mil.line("# #---------------------------------#\n");
#	mil.line("# [ 1,      \"Server\"                ]\n");
#	mil.line("# [ 4,      \"Interpreter\"           ]\n");
#	mil.line("# [ 5,      \"InternetServer\"        ]\n");
#	mil.line("# [ 7,      \"Interpreter\"           ]\n");
#	mil.line("# #2\n");
#	mil.line("# threadcnt(1);\n");
#	mil.line("# !ERROR: thisRequest: could not find itself\n");
#	mil.line("# Segmentation Fault (core dumped)\n");
#	mil.line("# \n");
#	mil.line("# ================\n");
#	mil.line("# Discription:\n");
#	mil.line("# ----------------\n");
#	mil.line("# The error does not occur deterministically. Sometimes\n");
#	mil.line("# it takes more than 2 'threadcnt(1)` calls, until the\n");
#	mil.line("# error occurs. Sometimes the error does not occur at all.\n");
#	mil.line("# The error may also occur after a single 'threadcnt(x)`\n");
#	mil.line("# call with x>1.\n");
#	mil.line("# In general, the error occurs less often on SunS5.5 (GNU=ON)\n");
#	mil.line("# than on SunOS5.6 (GNU=OFF).\n");
#	mil.line("# \n");
#	mil.line("# \tstefan\n");
#	mil.line("setoid(oid(2000000));");
	aa_a := calc.oid(2000000);
	ba_a := setoid(aa_a);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	ca_a := printf("#~BeginVariableOutput~#\n");
	da_a := threads();
	ea_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	fa_a := printf("#~BeginVariableOutput~#\n");
	ga_a := view_gdk_thread();
	ha_a := bat.print(ga_a);
	ia_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#1\n");
	ja_a := threadcnt(1);
#	mil.line("sleep(1);");
	ka_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	la_a := printf("#~BeginVariableOutput~#\n");
	ma_a := threads();
	na_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	oa_a := printf("#~BeginVariableOutput~#\n");
	pa_a := view_gdk_thread();
	qa_a := bat.print(pa_a);
	ra_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#2\n");
	sa_a := threadcnt(1);
#	mil.line("sleep(1);");
	ta_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	ua_a := printf("#~BeginVariableOutput~#\n");
	va_a := threads();
	wa_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	xa_a := printf("#~BeginVariableOutput~#\n");
	ya_a := view_gdk_thread();
	ab_a := bat.print(ya_a);
	bb_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#3\n");
	cb_a := threadcnt(1);
#	mil.line("sleep(1);");
	db_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	eb_a := printf("#~BeginVariableOutput~#\n");
	fb_a := threads();
	gb_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	hb_a := printf("#~BeginVariableOutput~#\n");
	ib_a := view_gdk_thread();
	jb_a := bat.print(ib_a);
	kb_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#4\n");
	lb_a := threadcnt(1);
#	mil.line("sleep(1);");
	mb_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	nb_a := printf("#~BeginVariableOutput~#\n");
	ob_a := threads();
	pb_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	qb_a := printf("#~BeginVariableOutput~#\n");
	rb_a := view_gdk_thread();
	sb_a := bat.print(rb_a);
	tb_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#5\n");
	ub_a := threadcnt(1);
#	mil.line("sleep(1);");
	vb_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	wb_a := printf("#~BeginVariableOutput~#\n");
	xb_a := threads();
	yb_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	ac_a := printf("#~BeginVariableOutput~#\n");
	bc_a := view_gdk_thread();
	cc_a := bat.print(bc_a);
	dc_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#6\n");
	ec_a := threadcnt(1);
#	mil.line("sleep(1);");
	fc_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	gc_a := printf("#~BeginVariableOutput~#\n");
	hc_a := threads();
	ic_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	jc_a := printf("#~BeginVariableOutput~#\n");
	kc_a := view_gdk_thread();
	lc_a := bat.print(kc_a);
	mc_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#7\n");
	nc_a := threadcnt(1);
#	mil.line("sleep(1);");
	oc_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	pc_a := printf("#~BeginVariableOutput~#\n");
	qc_a := threads();
	rc_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	sc_a := printf("#~BeginVariableOutput~#\n");
	tc_a := view_gdk_thread();
	uc_a := bat.print(tc_a);
	vc_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#8\n");
	wc_a := threadcnt(1);
#	mil.line("sleep(1);");
	xc_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	yc_a := printf("#~BeginVariableOutput~#\n");
	ad_a := threads();
	bd_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	cd_a := printf("#~BeginVariableOutput~#\n");
	dd_a := view_gdk_thread();
	ed_a := bat.print(dd_a);
	fd_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#9\n");
	gd_a := threadcnt(-1);
#	mil.line("sleep(1);");
	hd_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	id_a := printf("#~BeginVariableOutput~#\n");
	jd_a := threads();
	kd_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	ld_a := printf("#~BeginVariableOutput~#\n");
	md_a := view_gdk_thread();
	nd_a := bat.print(md_a);
	od_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#8\n");
	pd_a := threadcnt(-1);
#	mil.line("sleep(1);");
	qd_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	rd_a := printf("#~BeginVariableOutput~#\n");
	sd_a := threads();
	td_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	ud_a := printf("#~BeginVariableOutput~#\n");
	vd_a := view_gdk_thread();
	wd_a := bat.print(vd_a);
	xd_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#7\n");
	yd_a := threadcnt(-1);
#	mil.line("sleep(1);");
	ae_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	be_a := printf("#~BeginVariableOutput~#\n");
	ce_a := threads();
	de_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	ee_a := printf("#~BeginVariableOutput~#\n");
	fe_a := view_gdk_thread();
	ge_a := bat.print(fe_a);
	he_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#6\n");
	ie_a := threadcnt(-1);
#	mil.line("sleep(1);");
	je_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	ke_a := printf("#~BeginVariableOutput~#\n");
	le_a := threads();
	me_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	ne_a := printf("#~BeginVariableOutput~#\n");
	oe_a := view_gdk_thread();
	pe_a := bat.print(oe_a);
	qe_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#5\n");
	re_a := threadcnt(-1);
#	mil.line("sleep(1);");
	se_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	te_a := printf("#~BeginVariableOutput~#\n");
	ue_a := threads();
	ve_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	we_a := printf("#~BeginVariableOutput~#\n");
	xe_a := view_gdk_thread();
	ye_a := bat.print(xe_a);
	af_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#4\n");
	bf_a := threadcnt(-1);
#	mil.line("sleep(1);");
	cf_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	df_a := printf("#~BeginVariableOutput~#\n");
	ef_a := threads();
	ff_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	gf_a := printf("#~BeginVariableOutput~#\n");
	hf_a := view_gdk_thread();
	if_a := bat.print(hf_a);
	jf_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#3\n");
	kf_a := threadcnt(-1);
#	mil.line("sleep(1);");
	lf_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	mf_a := printf("#~BeginVariableOutput~#\n");
	nf_a := threads();
	of_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	pf_a := printf("#~BeginVariableOutput~#\n");
	qf_a := view_gdk_thread();
	rf_a := bat.print(qf_a);
	sf_a := printf("#~EndVariableOutput~#\n");
#	mil.line("#2\n");
	tf_a := threadcnt(-1);
#	mil.line("sleep(1);");
	uf_a := sleep(1);
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");threads();printf(\"#~EndVariableOutput~#\\n\");");
	vf_a := printf("#~BeginVariableOutput~#\n");
	wf_a := threads();
	xf_a := printf("#~EndVariableOutput~#\n");
#	mil.line("printf(\"#~BeginVariableOutput~#\\n\");view_gdk_thread().print();printf(\"#~EndVariableOutput~#\\n\");");
	yf_a := printf("#~BeginVariableOutput~#\n");
	ag_a := view_gdk_thread();
	bg_a := bat.print(ag_a);
	cg_a := printf("#~EndVariableOutput~#\n");
#	mil.line("quit();");
	dg_a := clients.quit();
