# The setup demonstration for a home lab environment
# using the MonetDB DataCell
include sql;
include datacell;
include dc_compiler;

datacell.open();

datacell.receptor("toy","localhost",99061);
datacell.define("toy","name",:int);
datacell.define("toy","batterylife",:int);
datacell.putPicture("toy","http://www.cwi.nl/~mk/datacell/images/stuffed_frog.jpg");

datacell.receptor("tv","localhost",99062);
datacell.define("tv","status",:int);
datacell.define("tv","channel",:int);
datacell.putPicture("tv","http://www.cwi.nl/~mk/datacell/images/28PW8719_12_webImage198.jpg");
datacell.putDocumentation("tv","http://www.consumer.philips.com");

datacell.receptor("thermostat","localhost",99063);
datacell.define("thermostat","temparature",:int);
datacell.define("thermostat","humidity",:int);
datacell.putPicture("thermostat","http://www.cwi.nl/~mk/datacell/images/thermostat.jpg");

datacell.receptor("chair","localhost",99700);
datacell.define("chair","id",:int);
datacell.define("chair","pressure",:flt);
datacell.putPicture("chair","http://www.cwi.nl/~mk/datacell/images/Carltonleather.chair.thumb.jpg");

datacell.receptor("cardio","localhost",99800);
datacell.define("cardio","heartbeat",:int);
datacell.define("cardio","pressure",:flt);
datacell.putPicture("cardio","http://www.cwi.nl/~mk/datacell/images/sigma_pc7.gif");

datacell.emitter("tv_out","localhost",99162);
datacell.define("tv_out","channel",:int);
datacell.putPicture("tv_out","http://www.cwi.nl/~mk/datacell/images/28PW8719_12_webImage198.jpg");
datacell.putDocumentation("tv","http://www.consumer.philips.com");

#datacell.pump("sitting","sql", "select avg(pressure) from chair;");
#datacell.pump("viewing","sql", "insert into tv_out select 2;");

mapi.listen();
