#The 2000 serie  is focussed on parallelism
#we start with a non-parallel version

function clkticks(n:int):void;
	io.printf("#start clock \n");
barrier	b:= n>0;
	io.printf("#tick\n");
	alarm.sleep(2);
	n:= n-1;
	redo b:= n>0;
exit	b;
end clkticks;

thread 	hdl:=0;	# should not be assigned a value to get started
	io.printf("#START THREAD \n");
	io.printf("#About to exit child\n");
exit	hdl;
	alarm.sleep(2);
	io.printf("#Wait for child to exit too\n");
	alarm.sleep(5);
	io.printf("#Child should have died\n");
	#wait hdl;
	#io.printf("child has finished\n");
