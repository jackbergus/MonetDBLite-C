
# select count(name) from tables
include sql;
mdb.list();
# simulate the SQL behavior
#   v2:bat[:void,:int]  := sql.bind("sys","ptables","id",0);
#   v60:bat[:void,:str]  := sql.bind("sys","ptables","name",0);
    v2v0:= bat.new(:void,:int);
    bat.insert(v2v0,nil,0);
    v2v1:= bat.new(:void,:int);
    bat.insert(v2v1,1@0,1);
    v2v2:= bat.new(:void,:int);
    bat.insert(v2v2,2@0,2);
    v2 := mat.new(v2v0,v2v1,v2v2);
	v60a := bat.new(:void,:str);
	bat.insert(v60a,0@0,"first");
	v60b := bat.new(:void,:str);
	bat.insert(v60b,1@0,"second");
	v60:= mat.new(v60a,v60b);

#   v23:bat[:void,:int]  := sql.bindvdbat("sys","ptables",0);
    v23:= bat.new(:void,:int);
#   v68:bat[:void,:str]  := sql.bind("sys","ptables","name",0);
	v68:= bat.new(:void,:str);

#   v8:bat[:void,:oid]  := sql.bindvdbat("sys","ptables",0);
    v8:= bat.new(:void,:oid);
    v10 := bat.reverse(v8);
    v12 := algebra.kdifference(v2,v10);
    v17 := algebra.markT(v12,0@0);
    v19 := bat.reverse(v17);
    v21 := algebra.join(v19,v2);
#   v26:bat[:void,:oid]  := sql.bindvdbat("sys","ttables",0);
    v26:= bat.new(:void,:oid);
    v28 := bat.reverse(v26);
    v30 := algebra.kdifference(v23,v28);
    v34 := algebra.markT(v30,0@0);
    v36 := bat.reverse(v34);
    v38 := algebra.join(v36,v23);
    v40 := bat.setAccess(v21,"w");
    bat.append(v40,v38);
    v47 := algebra.markT(v40,0@0);
    v49 := bat.reverse(v47);
    v51 := algebra.join(v49,v40);
    v56 := algebra.markT(v51,0@0);
    v58 := bat.reverse(v56);
    v66 := algebra.join(v19,v60);
    v71 := algebra.join(v36,v68);
    v73 := bat.setAccess(v66,"w");
    bat.append(v73,v71);
    v77 := algebra.join(v49,v73);
    v79 := algebra.join(v58,v77);
#   v81 := sql.resultSet(1,3,v79);
#   sql.rsColumn(v81,"tables","name","varchar",1024,0,v79);
    io.print(v79);

optimizer.multitable();

