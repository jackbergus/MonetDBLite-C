
INCLUDES = \
	-I../atoms -I../../mal \
	$(MONETDB_INCS)  \
	$(HWCOUNTERS_INCS) $(PCL_FLAGS)

MTSAFE

lib__batstr = {
	DIR = pkglibdir
	SEP = _
	SOURCES = batstr.mx
	HEADERS = h
	#SCRIPTS = mil ""
	LIBS = ../atoms/lib_str $(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS) ../../mal/libmal
}

lib__batcolor = {
	DIR = pkglibdir
	SEP = _
	SOURCES = batcolor.mx
	HEADERS = h
	#SCRIPTS = mil ""
	LIBS = ../atoms/lib_color $(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS) ../../mal/libmal
}

lib__group = {
	DIR = pkglibdir
	SEP = _
	SOURCES = group.mx
	HEADERS = h
	#SCRIPTS = mil ""
	LIBS = ./lib_algebra $(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS) ../../mal/libmal
}

lib__array = {
	DIR = pkglibdir
	SEP = _
	SOURCES = array.mx
	HEADERS = h
	#SCRIPTS = mil ""
	LIBS = ./lib_algebra $(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS) ../../mal/libmal
}

LIBS = {
	DIR = pkglibdir
	SEP = _
	SOURCES = \
		calc.mx bat.mx algebra.mx status.mx unix.mx \
		mapi.mx mmath.mx lock.mx sema.mx alarm.mx  \
		batcalc.mx batmath.mx aggr.mx counters.mx \
		pqueue.mx mkey.mx microbenchmark.mx

	HEADERS = h 
	#SCRIPTS = mal mil ""
	LIBS = $(MONETDB_LIBS) -lbat -lstream -lmapi \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS) ../../mal/libmal
	LDFLAGS = -lm
}

lib__logger = {
	DIR = pkglibdir
	SEP = _
	SOURCES = logger.mx
	HEADERS = h
	#SCRIPTS = mal mil ""
	LIBS = $(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS) \
		../../mal/libmal ./lib_bat
		
}

scripts_mal = {
	DIR = pkglibdir
	SOURCES = calc.mx bat.mx algebra.mx status.mx unix.mx \
		mapi.mx mmath.mx lock.mx sema.mx alarm.mx batstr.mx \
		batcolor.mx batcalc.mx batmath.mx group.mx aggr.mx array.mx \
		counters.mx logger.mx pqueue.mx mkey.mx microbenchmark.mx
}


EXTRA_DIST_DIR = Tests
