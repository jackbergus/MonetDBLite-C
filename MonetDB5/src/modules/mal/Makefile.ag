# The contents of this file are subject to the MonetDB Public License
# Version 1.1 (the "License"); you may not use this file except in
# compliance with the License. You may obtain a copy of the License at
# http://monetdb.cwi.nl/Legal/MonetDBLicense-1.1.html
#
# Software distributed under the License is distributed on an "AS IS"
# basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
# License for the specific language governing rights and limitations
# under the License.
#
# The Original Code is the MonetDB Database System.
#
# The Initial Developer of the Original Code is CWI.
# Portions created by CWI are Copyright (C) 1997-July 2008 CWI.
# Copyright August 2008-2010 MonetDB B.V.
# All Rights Reserved.

SUBDIRS = crackers HAVE_RAPTOR?rdf

INCLUDES = -I../atoms -I../kernel \
        -I../../mal $(CLIENTS_INCS) $(MONETDB_INCS) \
        $(Z_CFLAGS) $(BZ_CFLAGS) $(PCRE_CFLAGS) $(READLINE_INCS) $(LIBXML2_CFLAGS)

MTSAFE

LIBS = {
	DIR = libdir/MonetDB5
	SEP = _
	SOURCES = \
		chopper.mx constraints.mx language.mx box.mx \
		profiler.mx const.mx algebraExtensions.mx \
		inspect.mx manual.mx pqueue.mx mkey.mx \
		factories.mx groupby.mx mdb.mx  \
		urlbox.mx histogram.mx \
		sabaoth.mx remote.mx txtsim.mx recycle.mx \
		cluster.mx trader.mx pma.mx \
		tokenizer.mx zorder.mx
		#radix.mx 

	LIBS = ../../mal/libmonetdb5 ../kernel/lib_bat5 ../kernel/lib_algebra $(MONETDB_LIBS) -lbat -lstream $(MATH_LIBS) \
                $(CLIENTS_LIBS) -lMapi \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS)
}

lib_mat = {
	DIR = libdir/MonetDB5
	SEP = _
	SOURCES = mat.mx
	LIBS = ../../mal/libmonetdb5 ../kernel/lib_bat5 ../kernel/lib_group $(MONETDB_LIBS) -lbat -lstream $(MATH_LIBS) \
                $(CLIENTS_LIBS) -lMapi \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS) \
		$(LIBXML2_LIBS) $(ICONV_LIBS)
}

lib_batExtensions = {
	DIR = libdir/MonetDB5
	SEP = _
	SOURCES = batExtensions.mx
	LIBS = ../../mal/libmonetdb5 ../kernel/lib_bat5 $(MONETDB_LIBS) -lbat -lstream $(CLIENTS_LIBS) -lMapi \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS)
}

lib_replication = {
	DIR = libdir/MonetDB5
	SEP = _
	SOURCES = replication.mx
	LIBS = lib_sabaoth ../../mal/libmonetdb5 ../atoms/lib_mtime ../kernel/lib_bat5 \
		   ../kernel/lib_algebra $(MONETDB_LIBS) -lbat -lstream $(MATH_LIBS) \
                $(CLIENTS_LIBS) -lMapi \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS)
}

lib_batxml = {
	COND = HAVE_LIBXML2
	DIR = libdir/MonetDB5
	SEP = _
	SOURCES = batxml.mx
	LIBS = ../../mal/libmonetdb5 ../atoms/lib_xml ../kernel/lib_bat5 $(MONETDB_LIBS) -lbat -lstream $(MATH_LIBS) \
                $(CLIENTS_LIBS) -lMapi \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS) \
		$(LIBXML2_LIBS) $(ICONV_LIBS)
}

lib_bpm = {
	DIR = libdir/MonetDB5
	SEP = _
	SOURCES = bpm.mx
	LIBS = ../../mal/libmonetdb5 ../kernel/lib_bat5 ../kernel/lib_algebra $(MONETDB_LIBS) -lbat -lstream $(CLIENTS_LIBS) -lMapi \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS)
}

lib_mal_mapi = {
	DIR = libdir/MonetDB5
	SEP = _
	SOURCES = mal_mapi.mx
	LIBS = ../../mal/libmonetdb5 $(MONETDB_LIBS) -lbat -lstream $(CLIENTS_LIBS) -lMapi \
                $(OPENSSL_LIBS) $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS)
}

lib_mal_io = {
	DIR = libdir/MonetDB5
	SEP = _
	SOURCES = mal_io.mx 
	LIBS = ../../mal/libmonetdb5 $(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS)
}

lib__clients = {
	DIR = libdir/MonetDB5
	SOURCES = clients.mx

	#SCRIPTS = mal mil ""
	LIBS = ../../mal/libmonetdb5 $(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS) $(READLINE_LIBS) 
}

lib__pcre = {
	DIR = libdir/MonetDB5
	SOURCES = pcre.mx

	#SCRIPTS = mal mil ""
	LIBS = ../../mal/libmonetdb5 $(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS) $(PCRE_LIBS) 
}

lib__bbp = {
	DIR = libdir/MonetDB5
	SOURCES = bbp.mx

	#SCRIPTS = mal mil ""
	LIBS = ../../mal/libmonetdb5 ../kernel/lib_bat5 \
		$(MONETDB_LIBS) -lbat -lstream \
		$(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
		$(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS)
}

lib__tablet = {
	DIR = libdir/MonetDB5
	SOURCES = tablet.mx tablet_sql.mx

	#SCRIPTS = mal mil ""
	LIBS = lib_histogram ../../mal/libmonetdb5 ../kernel/lib_algebra \
		$(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS)
}

lib__transaction = {
	DIR = libdir/MonetDB5
	SOURCES = transaction.mx

	#SCRIPTS = mal mil ""
	LIBS = ../../mal/libmonetdb5 ../kernel/lib_bat5 $(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS)
}

lib__statistics = {
	DIR = libdir/MonetDB5
	SOURCES = statistics.mx

	#SCRIPTS = mal mil ""
	LIBS = ../../mal/libmonetdb5 ../kernel/lib_algebra \
		$(MONETDB_LIBS) -lbat -lstream \
                $(SOCKET_LIBS) $(Z_LIBS) $(BZ_LIBS) \
                $(MALLOC_LIBS) $(PTHREAD_LIBS) $(DL_LIBS)
}

headers_batxml_h = {
	COND = HAVE_LIBXML2
	DIR = includedir/MonetDB5/mal
	SOURCES = batxml.mx
	HEADERS = h 
}

headers_batxml_mal = {
	COND = HAVE_LIBXML2
	HEADERS = mal
	DIR = libdir/MonetDB5
	SOURCES = batxml.mx
}

headers_h = {
	DIR = includedir/MonetDB5/mal
	SOURCES = batExtensions.mx bpm.mx mal_mapi.mx mal_io.mx clients.mx \
		pcre.mx bbp.mx tablet.mx transaction.mx statistics.mx \
		chopper.mx constraints.mx language.mx box.mx \
		profiler.mx const.mx algebraExtensions.mx \
		inspect.mx manual.mx pqueue.mx mkey.mx \
		factories.mx groupby.mx mdb.mx  \
		urlbox.mx mat.mx histogram.mx \
		sabaoth.mx remote.mx  recycle.mx \
		cluster.mx trader.mx replication.mx pma.mx \
		tokenizer.mx zorder.mx
		#radix.mx 

	HEADERS = h 
}

headers_mal = {
	HEADERS = mal
	DIR = libdir/MonetDB5
	SOURCES = language.mx constraints.mx mal_init.mx box.mx bbp.mx \
		profiler.mx const.mx batExtensions.mx algebraExtensions.mx \
		inspect.mx manual.mx mal_io.mx pqueue.mx mkey.mx \
		chopper.mx clients.mx \
		factories.mx groupby.mx mdb.mx pcre.mx  tablet.mx mat.mx histogram.mx \
		urlbox.mx statistics.mx transaction.mx \
		mal_mapi.mx sabaoth.mx remote.mx  \
		bpm.mx txtsim.mx recycle.mx \
		cluster.mx trader.mx replication.mx pma.mx \
		tokenizer.mx zorder.mx
	#radix.mx
}

EXTRA_DIST_DIR = Tests
