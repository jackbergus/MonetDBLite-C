# The first reference case for fast cracking

include microbenchmark;
include crackers;

tuples:=1048576;
values:= tuples;
io.printf(" tuples %d\n",tuples);
io.printf(" values %d\n",values);

b:= microbenchmark.uniform(0@0,tuples,values);
size:= bat.getBatSize(b);
io.printf(" BAT size %d\n",size);

n:=30;
t:=0:lng;
barrier (go,i):= (true,0);
	b:= microbenchmark.uniform(0@0,tuples,values);
	mid:int:= mmath.rand();
	mid := mid % values;

t0:= alarm.usec();
	c:=crackers.zcrackOrdered(b,mid);
t1:= alarm.usec();
	time:= t1 - t0;
	t := t + time;
	v := crackers.zcrackOrdered_validate(c,mid);
	io.print(values,mid,time,v);

	values:int:= mmath.rand();
	values:= values % tuples;
	values:= values + 1;

	redo (go,i):= language.nextElement(1,n);
exit (go,i);

io.print("");
t := t / n;
io.print("ZeroOrdered",t);
