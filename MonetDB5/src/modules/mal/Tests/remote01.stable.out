stdout of test 'remote01` in directory 'src/modules/mal` itself:


# 09:35:17 >  
# 09:35:17 >  Mtimeout -timeout 60  mserver5 "--config=/ufs/fabian/scratch/monetdb/current/program-x86_64/etc/monetdb5.conf" --debug=10 --set "monet_mod_path=/ufs/fabian/scratch/monetdb/current/program-x86_64/lib64/MonetDB5:/ufs/fabian/scratch/monetdb/current/program-x86_64/lib64/MonetDB5/lib:/ufs/fabian/scratch/monetdb/current/program-x86_64/lib64/MonetDB5/bin" --set "gdk_dbfarm=/net/pegasus.ins.cwi.nl/export/scratch0/fabian/vtmp/mtest-current-pegasus.ins.cwi.nl/five/dbfarm" --set "sql_logdir=/net/pegasus.ins.cwi.nl/export/scratch0/fabian/vtmp/mtest-current-pegasus.ins.cwi.nl/five/sqllog" --set "xquery_logdir=/net/pegasus.ins.cwi.nl/export/scratch0/fabian/vtmp/mtest-current-pegasus.ins.cwi.nl/five/xquerylog" --set mapi_open=true --set mapi_port=37413 --set xrpc_port=46951 --set monet_prompt= --trace --dbname=mTests_src_modules_mal  remote01.mal
# 09:35:17 >  



# MonetDB server v5.7.0, based on kernel v1.25.0
# Serving database 'mTests_src_modules_mal'
# Compiled for x86_64-pc-linux-gnu/64bit with 64bit OIDs dynamically linked using 2 threads
# Copyright (c) 1993-2008 CWI, all rights reserved
# Visit http://monetdb.cwi.nl/ for further information
#include remote;
#
## create a connecton to ourself
#remote.create("test", "localhost", 50000, nil:str, "monetdb", "monetdb");
#
## retrieve a value (that for sure won't exist)
#remote.get("test", "b1");
#catch MALException:str;
#	io.printf("!%s\n",MALException);
#exit MALException;
#
## should raise an exception
#remote.create("test", "localhost", 50000, nil:str, "monetdb", "monetdb");
#catch MALException:str;
#	io.printf("!%s\n",MALException);
#exit MALException;
#
## help testweb a bit, since currently no cleanup is done on server
## shutdown
#remote.destroy("test");
#
## this should fail now
#remote.destroy("test");
#catch MALException:str;
#	io.printf("!%s\n",MALException);
#exit MALException;
#
function user.main():void;              #  0 main:void := user.main() {G}
#remote.prelude(); 
# ideally we would like to do this, however that's unfortunately 
# impossible since variadic stuff doesn't work in functions 
#function exec(conn:str, ident:str...):any; 
#	id := remote.exec(conn, ident, ...); 
#	ret := remote.get(conn, id); 
#	return(ret); 
#end exec; 
# for testweb, we need to ask the server itself how it is available, use 
# sabaoth for that 
#sabaoth.prelude(); 
    h := sabaoth.getLocalConnectionHost();#  4 h:str := SABgetLocalConnectionHost() {G}
    p := sabaoth.getLocalConnectionPort();#  5 p:int := SABgetLocalConnectionPort() 
# create a connecton to ourself 
    remote.create("test",h,p,nil:str,"monetdb","monetdb");#  7 _7:void := RMTcreate(_8:str, h:str, p:int, _9:str, _10:str, _10:str) 
# retrieve a value (that for sure won't exist) 
    remote.get("test",b1:rmtobj);       #  9 _12:any := RMTget(_8:str, _13:rmtobj) 
catch MALException:str ;                # 10 MALException:str {J12}
    io.printf("!%s\n",MALException);    # 11 _15:void := IOprint_formatted_str(_16:str, MALException:str) 
exit MALException:str ;                 # 12 MALException:str 
# should raise an exception (the arguments don't matter here) 
    remote.create("test","localhost",50000,nil:str,"test","test");# 14 _18:void := RMTcreate(_8:str, _19:str, _20:int, _9:str, _8:str, _8:str) 
catch MALException:str ;                # 15 MALException:str {J17}
    io.printf("!%s\n",MALException);    # 16 _21:void := IOprint_formatted_str(_16:str, MALException:str) 
exit MALException:str ;                 # 17 MALException:str 
# help testweb a bit, since currently no cleanup is done on server 
# shutdown 
    remote.destroy("test");             # 20 _24:void := RMTdestroy(_8:str) 
# this should fail now 
    remote.destroy("test");             # 22 _26:void := RMTdestroy(_8:str) 
catch MALException:str ;                # 23 MALException:str {J25}
    io.printf("!%s\n",MALException);    # 24 _27:void := IOprint_formatted_str(_16:str, MALException:str) 
exit MALException:str ;                 # 25 MALException:str 
end main;                               # 26  
!MALException:remote.get:no such object 'b1'

!MALException:remote.create:a connection with name 'test' already exists
!MALException:remote.destroy:no such connection with name 'test'

# 10:57:19 >  
# 10:57:19 >  Done.
# 10:57:19 >  

