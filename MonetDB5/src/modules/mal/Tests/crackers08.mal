# determine basic costs for cracking a larger table.
b:= bat.new(:int,:int);
l:= 0;
barrier (v,i):= mal.newRange(0:int);
        bat.insert(b,l,l);
		l:= l+1;
		l:= i *i;
        redo (v,i):= mal.nextElement(1:int,1000000:int);
exit (v,i);
#setReadMode(b);
mx:= algebra.max(b);
io.printf("max %d",mx);
mi:= algebra.min(b);
io.printf(" min %d\n",mi);
t0:= alarm.usec();
c:= algebra.copy(b);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#copy %d\n",d0);

t0:= alarm.usec();
crackers.new(b);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#crack init %d\n",d0);
#print(vrng);

l:= mi*2;
h:= mx/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
crackers.crack(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#crack %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
crackers.crack(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#crack %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
crackers.crack(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#crack %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
crackers.crack(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#crack %d\n",d0);

# Compare cracker with ordinary selection
t0:= alarm.usec();
i:= algebra.max(b);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#max %d\n",d0);
t0:= alarm.usec();
i:= algebra.min(b);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#min %d\n",d0);

l:= mi*2;
h:= mx/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
c:= algebra.select(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#select %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
c:= algebra.select(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#select %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
c:= algebra.select(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#select %d\n",d0);

l:= l*2;
h:= h/2;
#printf("select %d ",l);
#printf("%d\n",h);
t0:= alarm.usec();
c:= algebra.select(b,l,h);
t1:= alarm.usec();
d0:= t1-t0;
io.printf("#select %d\n",d0);
