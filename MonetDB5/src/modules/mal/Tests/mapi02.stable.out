stdout of test 'mapi02` in directory 'src/modules/mal` itself:


# 04:46:54 >  
# 04:46:54 >   mserver5 "--config=/ufs/mk/monet5/Linux/etc/monetdb5.conf" --debug=10 --set "monet_mod_path=/ufs/mk/monet5//Linux/lib/MonetDB5:/ufs/mk/monet5//Linux/lib/MonetDB5/lib:/ufs/mk/monet5//Linux/lib/MonetDB5/bin" --set "gdk_dbfarm=/ufs/mk/monet5//Linux/var/MonetDB5/dbfarm" --set "sql_logdir=/ufs/mk/monet5//Linux/var/MonetDB5/sql_logs"  --set mapi_open=true --set xrpc_open=true --set mapi_port=30399 --set xrpc_port=41245 --set monet_prompt= --trace --dbname=mTests_src_modules_mal  remote05.mal
# 04:46:54 >  

# MonetDB server v5.3.0, based on kernel v1.21.0
# Serving database 'mTests_src_modules_mal'
# Compiled for x86_64-redhat-linux-gnu/64bit with 64bit OIDs dynamically linked
# Copyright (c) 1993-2007 CWI, all rights reserved
# Visit http://monetdb.cwi.nl/ for further information
# Listening for connection requests on mapi:monetdb://gio.ins.cwi.nl:30399/
##this example tests recieving tuple values as part of the
##MAL interface.
## now in a remote setting
#
#include remote;
## for testweb, we need to ask the server itself how it is available, use
## sabaoth for that
#include sabaoth;
#
#h := sabaoth.getLocalConnectionHost();
#p := sabaoth.getLocalConnectionPort();
#
## create a connecton to ourself
#remote.create("test", h, p, nil:str, "monetdb", "monetdb");
#
#b:= bat.new(:oid,:str);
#bat.insert( 0@0, "hello");
#bat.insert( 0@1, "world");
#
## store the values
#remote.send("test",b);
#c:= remote.query("test","io.print(b);")
!SyntaxException:parseError:io.print(c);
!SyntaxException:parseError:^';' expected
#
#
function user.main():void;	# 0  (main:void)
#this example tests recieving tuple values as part of the 	# 1  unknown (_1:str)
#MAL interface. 	# 2  unknown (_2:str)
# now in a remote setting 	# 3  unknown (_3:str)
#remote.prelude(); 	# 4  unknown (_4:str)
# ideally we would like to do this, however that's unfortunately 	# 5  unknown (_5:str)
# impossible since variadic stuff doesn't work in functions 	# 6  unknown (_6:str)
#function exec(conn:str, ident:str...):any; 	# 7  unknown (_7:str)
#	id := remote.exec(conn, ident, ...); 	# 8  unknown (_8:str)
#	ret := remote.get(conn, id); 	# 9  unknown (_9:str)
#	return(ret); 	# 10  unknown (_10:str)
#end exec; 	# 11  unknown (_11:str)
# for testweb, we need to ask the server itself how it is available, use 	# 12  unknown (_12:str)
# sabaoth for that 	# 13  unknown (_13:str)
#sabaoth.prelude(); 	# 14  unknown (_14:str)
    h := sabaoth.getLocalConnectionHost();	# 15  unknown (h:any)
    p := sabaoth.getLocalConnectionPort();	# 16  unknown (p:any)
# create a connecton to ourself 	# 17  unknown (_17:str)
    remote.create("test",h,p,nil:str,"monetdb","monetdb");	# 18  unknown (_18:any)<-(_19:str)(h:any)(p:any)(_20:str)(_21:str)(_21:str)
    b := bat.new(:oid,:str);	# 19  unknown (b:any)<-(_23:oid)(_24:str)
    bat.insert(0@0,"hello");	# 20  unknown (_25:any)<-(_26:oid)(_27:str)
    bat.insert(0@0,"world");	# 21  unknown (_28:any)<-(_26:oid)(_29:str)
# store the values 	# 22  unknown (_30:str)
    remote.send("test",b);	# 23  unknown (_31:any)<-(_19:str)(b:any)
    c := remote.query("test","io.print(b);");	# 24  unknown (c:any)<-(_19:str)(_33:str)
end main;	# 25  unknown 

# 04:46:54 >  
# 04:46:54 >  Done.
# 04:46:54 >  

