include armada;

# register this armada in the catalog (SQL uses this)
tid := armada.addTable("mytable");
# in the future it should be possible to bind multiple BATs to a box
bbat := bat.new(:void,:int);

# create a trail
s1 := armada.addSite("127.0.0.1":inet, 50000:int, "chain":str, "key":str);
s2 := armada.addSite("10.0.0.10":inet, 50000:int, "chain":str, "key":str);
b := bat.new(:str, :oid);
bat.insert(b, "func1", s1);
bat.insert(b, "func2", s2);

# add the trail
armada.addTrail(tid, bbat, b);

# show some stuff
f := bbp.bind("armada_func_site");
s := bbp.bind("armada_step_pre");
io.print(f);
io.print(s);
