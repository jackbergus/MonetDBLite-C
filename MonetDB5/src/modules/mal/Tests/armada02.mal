include armada;

s1 := armada.addSite("127.0.0.8":inet, 50000:int, "chain":str, "key":str);
b := bat.new(:str, :oid);
bat.insert(b, "func1", s1);
# tricky one... should probably bail out on this one later
s2 := armada.addSite("127.0.0.0/24":inet, 50000:int, "chain":str, "key":str);
bat.insert(b, "func2", s2);
armada.addTrail(b);

s := armada.findStep("func1", s1);
io.print(s);
p := armada.getStep(s);
io.print(p);
s := s + 1;
io.print(s);
p := armada.getStep(s);
io.print(p);
s := s + 1;
io.print(s);
p := armada.getStep(s);
io.print(p);
