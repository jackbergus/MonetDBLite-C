# 
# >Number:         165
# >Category:       Module_libgdk
# >Synopsis:       mark(BAT) fails
# >Confidential:   no
# >Severity:       serious
# >Priority:       medium
# >Responsible:    boncz (Peter Boncz)
# >State:          open
# >Class:          sw-bug
# >Submitter-Id:   unknown
# >Arrival-Date:   Wed Aug 12 15:18:26 1998
# >Originator:     manegold@cwi.nl
# >Organization:
# CWI
# >Release:        980101
# >Environment:
# any
# >Description:
# mark(BAT) fails with
# !ERROR: CMDmark_default: returned BAT has unexpected head.
# 
# ========
# test script
# --------
# b:= new(str,int);
# b.insert("the",1);
# b.insert("quick",20);
# b.insert("brown",30);
# b.insert("fox",40);
# b.insert("jumps",50);
# b.insert("over",60);
# b.insert("lazy",70);
# b.insert("dog",80);
# b.insert(str(nil),90);
# b.insert(".",100);
# b.insert("",int(nil));
# b.insert(str(nil),int(nil));
# b.print;
# 
# c:= mark(b);
# print(c);
# quit;
# 
# ========
# output
# --------
# [...]
# b.print;
# #-------------------------#
# # BAT:            tmp_23  #
# # (str)           (int)   #
# #-------------------------#
# [ "the",          1       ]
# [ "quick",        20      ]
# [ "brown",        30      ]
# [ "fox",          40      ]
# [ "jumps",        50      ]
# [ "over",         60      ]
# [ "lazy",         70      ]
# [ "dog",          80      ]
# [ nil,            90      ]
# [ ".",            100     ]
# [ "",             nil     ]
# [ nil,            nil     ]
# 
# c:= mark(b);
# !ERROR: CMDmark_default: returned BAT has unexpected head.
# print(c);
# !WARNING: BATdescriptor: range error
# !ERROR: interpret operator: 1nd param: invalid BAT.
# quit;
# 
# ========

setoid(oid(20000000));

var b:= new(str,int);
b.insert("the",1);
b.insert("quick",20);
b.insert("brown",30);
b.insert("fox",40);
b.insert("jumps",50);
b.insert("over",60);
b.insert("lazy",70);
b.insert("dog",80);
b.insert(str(nil),90);
b.insert(".",100);
b.insert("",int(nil));
b.insert(str(nil),int(nil));
b.print();

var c:= mark(b,oid(20000050));
print(c);

quit();

