stdout of test 'no.051` in directory 'tests/BugReports` itself:

#> Mtest:	milS no.051 milS
#> Mtest:	Mtimeout -timeout 210 Mserver -modulesilent -yaccsilent -d8 -db tests_BugReports -single no.051.milS
# Monet Database Server V4.1
# Copyright (c) 1993-1999, CWI & SION. All rights reserved.
# compiled for IRIX646.5/32bit on Fri Jan 14 01:04:33 MET 2000.
#script:no.051.milS


# Monet Database Server V4.3.5
# Copyright (c) 1993-2002, CWI. All rights reserved.
# compiled for i686-pc-linux-gnu/32bit; dynamically linked.
# >Number:         51
# >Category:       MIL
# >Synopsis:       returns from within a batloop
# >Confidential:   no
# >Severity:       serious
# >Priority:       medium
# >Responsible:    boncz
# >State:          closed
# >Class:          sw-bug
# >Submitter-Id:   unknown
# >Arrival-Date:   Wed Oct 15 13:50:27 1997
# >Originator:     niels
# >Organization:
# >Release:        971007
# >Environment:
# SOLARIS 2.5.1
# >Description:
# When a bat is returned from with a batloop the return value
# is incorrect. 
# proc create(b) := {
#         var a := new (oid,flt);
#         b@batloop(){
#                 if (a.count = 0)
#                         return a;
#         }
#         return a;
# }
# 
# b := new (oid,flt);
# b.insert(oid(1),flt(2));
# var c := create(b);
# b.semijoin(c).print;
# #output
# !WARNING: BATdescriptor: range error
# !ERROR: interpret command/proc: 2nd param: invalid BAT.
# [ nil ]

proc create(bat b) : bat {
        var a := new (oid,flt);
        b@batloop(){
                if (a.count() = 0)
                        return a;
        }
        return a;
}

var b := new (oid,flt);
b.insert(oid(1),flt(2));
b.print();
#-----------------#
# BAT:	  tmp_25  #
# (oid)	  (flt)	  #
#-----------------#
[ 1@0,	  2	  ]
var c := create(b);
b.print();
#-----------------#
# BAT:	  tmp_25  #
# (oid)	  (flt)	  #
#-----------------#
[ 1@0,	  2	  ]
c.print();
#-----------------#
# BAT:	  tmp_26  #
# (oid)	  (flt)	  #
#-----------------#
b.semijoin(c).print();
#-----------------#
# BAT:	  tmp_27  #
# (oid)	  (flt)	  #
#-----------------#

quit();

# 17:06:49 >  
# 17:06:49 >  Done.
# 17:06:49 >  

