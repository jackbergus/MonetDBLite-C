setoid(oid(20000000));
#test basic functionality of the BAT library.
#focussed on float
#it includes insertions,deletions,selections, and joins.

print(3.147);

var b:= new(flt,flt);
b.insert(1.2, 15.6);
b.insert(2.3, 4.5);
b.insert(3.0, flt(nil));
b.insert(4.5, 16.7);
b.insert(5.6, 25.6);
b.insert(6.6, 36.7);
b.insert(7.8, 49.0);
b.insert(8.9, 64.5);
b.insert(9.0, flt(nil));
b.insert(flt(nil),flt(nil));
b.insert(flt(nil),81.2);
b.print();


# Testing simple retrievals
b.find(1.2).print();
b.find(4.5).print();
b.find(flt(nil)).print();
# This should cause an error
b.find(10.1).print();

# Can we delete them and re-insert them later on
b.delete(4.5, 16.7);
b.delete(1.2, 15.6);
b.delete(flt(nil),81.2);
b.print();

b.insert(4.5, 16.7);
b.insert(1.2, 15.6);
b.insert(flt(nil),81.2);
b.count().print();

# Lets cut out a few sections
b.select(25.6,64.5).print();
b.select(4.5,15.6).print();
b.select(4.5,4.5).print();
# This should cause an error
b.select(4.5,3.4).print();
b.select(81.2,flt(nil)).print();
b.select(flt(nil),flt(nil)).print();

# A 2-dimensional cut
var bn:=b.fragment(1.2,5.6,4.5,15.6);bn.print();
b.fragment(1.2,5.6,16.2,flt(nil)).print();
b.fragment(1.2,flt(nil),16.2,flt(nil)).print();
b.fragment(flt(nil),flt(nil),16.2,flt(nil)).print();

var b1:= b.join(bn.reverse());
b1.print();

var b2:= b.semijoin(b1);
b2.print();

# band join experiment
var c:= b.copy();
bandjoin(b,c,4.5,4.5).print();
quit();
