setoid(oid(20000000));

var x := new(oid,chr);
x.insert(oid(1),'a');
x.insert(oid(2),'a');
x.insert(oid(3),'b');
x.insert(oid(4),'b');
x.insert(oid(5),'b');
x.insert(oid(6),'b');
x.insert(oid(7),'c');
x.insert(oid(8),'c');
x.rename("x");
x.roles("oid","x");
x.persists(true);

var y:= new(oid,chr);
y.insert(oid(1),'a');
y.insert(oid(2),'c');
y.insert(oid(3),'b');
y.insert(oid(4),'b');
y.insert(oid(5),'b');
y.insert(oid(6),'c');
y.insert(oid(7),'a');
y.insert(oid(8),'a');
y.rename("y");
y.roles("oid","y");
y.persists(true);

var z:= new(oid,chr);
z.insert(oid(1),'c');
z.insert(oid(2),'a');
z.insert(oid(3),'b');
z.insert(oid(4),'c');
z.insert(oid(5),'a');
z.insert(oid(6),'a');
z.insert(oid(7),'c');
z.insert(oid(8),'a');
z.rename("z");
y.roles("oid","z");
z.persists(true);

module(xtables);
print(x,y,z);

var t1 := x.CTgroup().map();
t1.print();
var t2 := t1.CTderive(y).map();
t2.print();
t2 := t1.CTgroup(y).map();
t2.print();
#print(t2.histogram,x,y);
#CTprint(t2.histogram,y);


#x1y := CTderive(x1,y);
#h := x1y.histogram();
#h.roles("count","oid");
#print(h.reverse,x,y);
#
#x1yz := CTderive(x1y,z);
#h := x1yz.histogram();
#h.roles("count","oid");
#print(h.reverse,x,y,z);
#
#
#CThistogram(x1).print;
#CThistogram(x1y).print;
#CThistogram(x1yz).print;

quit();
