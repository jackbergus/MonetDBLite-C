stdout of test 'TMsubcommit` in directory 'src/gdk` itself:


# 12:47:18 >  
# 12:47:18 >  Mtimeout -timeout 60 Mserver "--config=/var/tmp/_Current_PREFIX__GNU_32_d_--enable-debug_--enable-noexpand=all_/etc/MonetDB.conf" --debug=10 --set "monet_mod_path=/var/tmp/_Current_PREFIX__GNU_32_d_--enable-debug_--enable-noexpand=all_/lib/MonetDB:/var/tmp/_Current_PREFIX__GNU_32_d_--enable-debug_--enable-noexpand=all_/lib/bin" --set "gdk_dbfarm=/var/tmp/_Current_PREFIX__GNU_32_d_--enable-debug_--enable-noexpand=all_/var/MonetDB/dbfarm" --set "sql_logdir=/var/tmp/_Current_PREFIX__GNU_32_d_--enable-debug_--enable-noexpand=all_/var/MonetDB/log" --set mapi_port=31315 --set sql_port=44739 --set xquery_port=54477 --set monet_prompt= --trace --dbname=mTests_src_gdk  < TMsubcommit.milS
# 12:47:18 >  

# Monet Database Server V4.7.3
# Copyright (c) 1993-2005, CWI. All rights reserved.
# Compiled for i686-redhat-linux-gnu/32bit; dynamically linked.
# Visit http://monetdb.cwi.nl/ for further information.
debugmask(19);

bat(int,int).insert(1,2).rename("b").persists(true);
commit();
#01 #HEAPsave(65.buns,storage=0,free=8,size=2048)
#01 #GDKsave: name=65, ext=buns, mode 0
#01 #write(fd 5, buf 0x70d5a0, size 0) = 8
#01 #BATsavedesc(65,free=8) = 0
#01 #BBPdir: writing BBP.dir (55 bats).
#01 #BBPdir start oid=1010858@0 #01 
[  27, 32, MMO_location, 33, 3 ]
[  53, 64, b, 65, 4672 ]
#01 #BBPdir end
#01 #BBPsync: rename bat/BACKUP bat/DELETE_ME = 0
#01 #GDKremovedir(bat/DELETE_ME)
#01 #unlink bat/DELETE_ME/BBP.dir = 0
#01 #rmdir bat/DELETE_ME = 0
#01 #mkdir bat/BACKUP = 0
#01 #move bat/BBP.dir bat/BACKUP/BBP.dir = 0 (0ms)

bat(int,int).insert(3,4).rename("a").persists(true);
subcommit(bat(int,str).insert(0,"a"));
#01 #mkdir bat/BACKUP/SUBCOMMIT = 0
#01 #move bat/BACKUP/BBP.dir bat/BACKUP/SUBCOMMIT/BBP.dir = 0 (0ms)
#01 #HEAPsave(67.head,storage=0,free=4,size=1024)
#01 #GDKsave: name=67, ext=head, mode 0
#01 #write(fd 7, buf 0x77c34c, size 0) = 4
#01 #HEAPsave(67.tail,storage=0,free=4,size=1024)
#01 #GDKsave: name=67, ext=tail, mode 0
#01 #write(fd 7, buf 0x62510c, size 0) = 4
#01 #BATsavedesc(67,free=4,4) = 0
#01 #BBPdir: writing BBP.dir (57 bats).
#01 #BBPdir start oid=1010864@0 #01 
[  27, 32, MMO_location, 33, 3 ]
[  53, 32, b, 65, 4672 ]
[  55, 64, a, 67, 4716 ]
#01 #BBPdir end
#01 #BBPsync: rename bat/BACKUP/SUBCOMMIT/ bat/DELETE_ME/ = 0
#01 #GDKremovedir(bat/DELETE_ME/)
#01 #unlink bat/DELETE_ME/BBP.dir = 0
#01 #rmdir bat/DELETE_ME/ = 0
#01 #move bat/BBP.dir bat/BACKUP/BBP.dir = 0 (2ms)

{
var tmp := bat(int,str).insert(0,"a");
bat("a").persists(false);
subcommit(tmp);
}
#01 #mkdir bat/BACKUP/SUBCOMMIT = 0
#01 #move bat/BACKUP/BBP.dir bat/BACKUP/SUBCOMMIT/BBP.dir = 0 (0ms)
#01 #BBPdir: writing BBP.dir (57 bats).
#01 #BBPdir start oid=1010864@0 #01 
[  27, 32, MMO_location, 33, 3 ]
[  53, 32, b, 65, 4672 ]
#01 #BBPdir end
#01 #BBPsync: rename bat/BACKUP/SUBCOMMIT bat/DELETE_ME = 0
#01 #GDKremovedir(bat/DELETE_ME)
#01 #unlink bat/DELETE_ME/BBP.dir = 0
#01 #rmdir bat/DELETE_ME = 0
#01 #move bat/BBP.dir bat/BACKUP/BBP.dir = 0 (0ms)
#01 #BATdelete 67
#01 #unlink bat/67.desc = 0
#01 #unlink bat/67.buns = 0

bat("b").persists(false);
commit();
#01 #BBPdir: writing BBP.dir (57 bats).
#01 #BBPdir start oid=1010864@0 #01 
[  27, 32, MMO_location, 33, 3 ]
#01 #BBPdir end
#01 #BBPsync: rename bat/BACKUP bat/DELETE_ME = 0
#01 #GDKremovedir(bat/DELETE_ME)
#01 #unlink bat/DELETE_ME/BBP.dir = 0
#01 #rmdir bat/DELETE_ME = 0
#01 #mkdir bat/BACKUP = 0
#01 #move bat/BBP.dir bat/BACKUP/BBP.dir = 0 (0ms)
#01 #BATdelete 65
#01 #unlink bat/65.desc = 0
#01 #unlink bat/65.head = 0
#01 #unlink bat/65.tail = 0
quit();

# 12:47:18 >  
# 12:47:18 >  Done.
# 12:47:18 >  

