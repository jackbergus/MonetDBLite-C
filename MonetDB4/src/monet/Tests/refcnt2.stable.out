stdout of test 'refcnt2` in directory 'src/monet` itself:


# 20:15:01 >  
# 20:15:01 >  Mtimeout -timeout 300 ./refcnt2 refcnt2 
# 20:15:01 >  


# 20:15:01 >  
# 20:15:01 >  Mtimeout -timeout 60 Mserver --config=/var/tmp/_4.3.13-FixedPetersDDsync_PREFIX_MONET_GNU_32_d_--enable-warning_/etc/monet.conf --debug=10 --set monet_mod_path=/var/tmp/_4.3.13-FixedPetersDDsync_PREFIX_MONET_GNU_32_d_--enable-warning_/lib/MonetDB --set gdk_dbfarm=/var/tmp/_4.3.13-FixedPetersDDsync_PREFIX_MONET_GNU_32_d_--enable-warning_/var/MonetDB/dbfarm --set sql_logdir=/var/tmp/_4.3.13-FixedPetersDDsync_PREFIX_MONET_GNU_32_d_--enable-warning_/var/MonetDB/log --set mapi_port=53356 --set sql_port=56392 --set monet_prompt= --trace --dbname=mTests_src_monet
# 20:15:01 >  

# Monet Database Server V4.3.13
# Copyright (c) 1993-2004, CWI. All rights reserved.
# compiled for i686-pc-linux-gnu/32bit; dynamically linked.
# Inserting a transient BAT into another transient BAT increases the first
# (i.e., inserted) one's plevel.
# Removing all references to the "host"-BAT by hand correctly decreases the
# inserted BAT's plevel, again.
# However, removing all references to the "host"-BAT by quitting the Mserver
# does not decreases the inserted BAT's plevel, and hence leaves a
# persistent "orphan"-BAT behind...

var b:=new(int,int);
b.rename("b");
var a:=new(int,bat);
a.rename("a");
a.insert(1,b);
var d:=new(int,int);
d.rename("d");
var c:=new(int,bat);
c.rename("c");
c.insert(1,d);
print(bat("a"));
#-----------------#
# h	a	  # name
# int	BAT	  # type
#-----------------#
[ 1,	  <b>	  ]
print(bat("b"));
#-----------------#
# h	b	  # name
# int	int	  # type
#-----------------#
print(bat("c"));
#-----------------#
# h	c	  # name
# int	BAT	  # type
#-----------------#
[ 1,	  <d>	  ]
print(bat("d"));
#-----------------#
# h	d	  # name
# int	int	  # type
#-----------------#
c:=nil;
print(bat("c"));
!ERROR: interpret_params: print(param 1): invalid BAT.
quit();   

# 20:15:02 >  
# 20:15:02 >  Mtimeout -timeout 60 Mserver --config=/var/tmp/_4.3.13-FixedPetersDDsync_PREFIX_MONET_GNU_32_d_--enable-warning_/etc/monet.conf --debug=10 --set monet_mod_path=/var/tmp/_4.3.13-FixedPetersDDsync_PREFIX_MONET_GNU_32_d_--enable-warning_/lib/MonetDB --set gdk_dbfarm=/var/tmp/_4.3.13-FixedPetersDDsync_PREFIX_MONET_GNU_32_d_--enable-warning_/var/MonetDB/dbfarm --set sql_logdir=/var/tmp/_4.3.13-FixedPetersDDsync_PREFIX_MONET_GNU_32_d_--enable-warning_/var/MonetDB/log --set mapi_port=53356 --set sql_port=56392 --set monet_prompt= --trace --dbname=mTests_src_monet
# 20:15:02 >  

# Monet Database Server V4.3.13
# Copyright (c) 1993-2004, CWI. All rights reserved.
# Compiled for i686-pc-linux-gnu/32bit; dynamically linked.
# Visit http://monetdb.cwi.nl/ for further information.
bat("a").print();
!ERROR: interpret_params: print(param 1): invalid BAT.
bat("b").print();
!ERROR: interpret_params: print(param 1): invalid BAT.
bat("c").print();
!ERROR: interpret_params: print(param 1): invalid BAT.
bat("d").print();
!ERROR: interpret_params: print(param 1): invalid BAT.
quit();   

# 20:15:03 >  
# 20:15:03 >  Done.
# 20:15:03 >  

