stdout of test 'mmath2` in directory 'modules/plain` itself:

#> Mtest (13:31:46):	milS mmath2 milS
#> Mtest (13:31:46):	Mtimeout -timeout 600 Mserver -modulesilent -yaccsilent -d8 -db src_modules_plain -single mmath2.milS
# Monet Database Server V4.2
# Copyright (c) 1993-1999, CWI & SION. All rights reserved.
# compiled for Linux2.2.12-20smp/32bit on Thu Mar 23 00:51:04 CET 2000.
#script:mmath2.milS

# 19:42:01 >  
# 19:42:01 >   Mserver "--config=D:\TmpDir\manegold.ntv_32-d.31914\MonetDB\WindowsNT5.0\conf\monet.conf" --debug=10 --set "monet_mod_path=D:\TmpDir\manegold.ntv_32-d.31914\MonetDB\WindowsNT5.0\src\modules\plain\.libs;D:\TmpDir\manegold.ntv_32-d.31914\MonetDB\WindowsNT5.0\src\modules\contrib\.libs;D:\TmpDir\manegold.ntv_32-d.31914\MonetDB\WindowsNT5.0\src\modules\calibrator\.libs;D:\TmpDir\manegold.ntv_32-d.31914\MonetDB\WindowsNT5.0\src\mapi\.libs" --set "gdk_dbfarm=D:\TmpDir\manegold.ntv_32-d.31914\MonetDB\WindowsNT5.0\dbfarm" --set "sql_logdir=D:\TmpDir\manegold.ntv_32-d.31914\MonetDB\WindowsNT5.0\log" --set mapi_port=46706 --set sql_port=59373 --set monet_prompt= --trace --dbname=mTests_src_modules_plain  < mmath2.milS
# 19:42:01 >  

# Monet Database Server V4.3.16-rc03
# Copyright (c) 1993-2004, CWI. All rights reserved.
# compiled for i686-pc-win32/32bit; dynamically linked.

# Monet Database Server V4.5.0
# Copyright (c) 1993-2004, CWI. All rights reserved.
# Compiled for i686-redhat-linux-gnu/32bit; dynamically linked.
# Visit http://monetdb.cwi.nl/ for further information.
module(mmath);

# test parameter: what margin do we accept?
var epsilon := dbl(0.000001);

# set up a BAT with test expressions and expected results
var expect := bat(str, dbl);
expect.insert("sin(dbl(0))",			dbl(0));
expect.insert("sin(M_PI_4)",			M_SQRT1_2);
expect.insert("sin(M_PI_2)",			dbl(1));
expect.insert("sin(M_PI)",			dbl(0));
expect.insert("sin(3*M_PI_2)",			dbl(-1));
expect.insert("cos(dbl(0))",			dbl(1));
expect.insert("cos(M_PI_4)",			M_SQRT1_2);
expect.insert("cos(M_PI_2)",			dbl(0));
expect.insert("cos(M_PI)",			dbl(-1));
expect.insert("cos(3*M_PI_2)",			dbl(0));
expect.insert("tan(dbl(0))",			dbl(0));
expect.insert("tan(M_PI_4)",			dbl(1));
# expect.insert("tan(M_PI_2)",			Infinite);
expect.insert("tan(M_PI)",			dbl(0));
# expect.insert("tan(3*M_PI_2)",		Infinite);
expect.insert("asin(dbl(-1))",			-(M_PI_2));
expect.insert("asin(dbl(-0.5))",		-(M_PI_2/dbl(3)));
expect.insert("asin(dbl(0))",			dbl(0));
expect.insert("asin(dbl(0.5))",			M_PI_2/dbl(3));
expect.insert("asin(dbl(1))",			M_PI_2);
expect.insert("acos(dbl(-1))",			M_PI);
expect.insert("acos(dbl(-0.5))",		(M_PI*dbl(2))/dbl(3));
expect.insert("acos(dbl(0))",			M_PI_2);
expect.insert("acos(dbl(0.5))",			M_PI/dbl(3));
expect.insert("acos(dbl(1))",			dbl(0));
expect.insert("atan(dbl(-1))",			-(M_PI_4));
expect.insert("atan(-(sqrt(dbl(3))/dbl(3)))",	-(M_PI/dbl(6)));
expect.insert("atan(dbl(0))",			dbl(0));
expect.insert("atan(dbl(1))",			M_PI_4);
expect.insert("asin(sin(M_PI))",		dbl(0));
expect.insert("acos(cos(M_PI))",		M_PI);
expect.insert("atan(tan(M_PI_2))",		M_PI_2);
expect.insert("atan(tan(M_PI_4))",		M_PI_4);
expect.insert("tan(atan2(dbl(0.1),dbl(1.0)))",	dbl(0.1));
expect.insert("sqrt(pow(dbl(2),dbl(2)))",	dbl(2));
expect.insert("log(exp(dbl(10)))",		dbl(10));
expect.insert("exp(log(dbl(10)))",		dbl(10));
expect.insert("log10(dbl(10))",			dbl(1));
expect.insert("ceil(dbl(1.2))",			dbl(2));
expect.insert("fabs(dbl(1.2))",			dbl(1.2));
expect.insert("floor(dbl(1.2))",		dbl(1));
expect.insert("fmod(dbl(15.2),dbl(2.5))",	dbl(0.2));

# do the calculations and collect the results in a BAT
var actual := bat(str, dbl);
var v;
expect@batloop() { eval("v := " + $h + ";"); actual.insert($h, v); }

# calculate the difference
var diff := [-](expect, actual);

# print all expressions which resulted in too large an error
# we expect an empty table
sdiff(diff, select(diff, dbl(-(epsilon)), dbl(epsilon))).print();
#-----------------#
# h	tmp_32	  # name
# str	dbl	  # type
#-----------------#
quit();

# 17:05:14 >  
# 17:05:14 >  Done.
# 17:05:14 >  

