module(ascii_io);

PROC load_persistent( str file ) : int {
	make_persistent(load_data(load_format(file +".fmt"), file+".dat.bz2", 1000000));
	commit();
	return 1;
}

PROC restore( str Dir ) : void {
	var fmt := load_format( Dir + "files.fmt" ); 
	var files:= load_data(fmt, Dir + "files.dat.bz2", 100000).find("files");
	[load_persistent](files);
}
#restore("/tmp/bup/");
