# "Meta-Makefile[.in]" for buildtools

SRC="@SRC@"
BUILD="@BUILD@"
PREFIX="@PREFIX@"
DESTDIR=

# Run individual "make [all]"s ...
default: all
	@-echo

all:
	cd "$(SRC)/autogen" && python setup.py build
	cd _MX && $(MAKE) MAKE=$(MAKE) $@
	cd _MEL && $(MAKE) MAKE=$(MAKE) $@
	cd _BURG && $(MAKE) MAKE=$(MAKE) $@

# ... run individual "make install"s ...
install:
	cd "$(SRC)/autogen" && python setup.py install --prefix="$(DESTDIR)$(PREFIX)"
	cd _MX && $(MAKE) MAKE=$(MAKE) $@
	cd _MEL && $(MAKE) MAKE=$(MAKE) $@
	cd _BURG && $(MAKE) MAKE=$(MAKE) $@

# ... and individual "make *"s
%:
	cd _MX && $(MAKE) MAKE=$(MAKE) $@
	cd _MEL && $(MAKE) MAKE=$(MAKE) $@
	cd _BURG && $(MAKE) MAKE=$(MAKE) $@
