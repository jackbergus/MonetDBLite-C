stdout of test 'foreign_key` in directory 'sql/test/pg_regress` itself:


# 17:10:26 >  
# 17:10:26 >  "mserver5" "--debug=10" "--set" "gdk_nr_threads=0" "--set" "mapi_open=true" "--set" "mapi_port=38959" "--set" "mapi_usock=/var/tmp/mtest-1142/.s.monetdb.38959" "--set" "monet_prompt=" "--forcemito" "--set" "mal_listing=2" "--dbpath=/ufs/dinther/INSTALL/var/MonetDB/mTests_sql_test_pg_regress" "--set" "mal_listing=0"
# 17:10:26 >  

# MonetDB 5 server v11.18.0
# This is an unreleased version
# Serving database 'mTests_sql_test_pg_regress', using 8 threads
# Compiled for x86_64-unknown-linux-gnu/64bit with 64bit OIDs dynamically linked
# Found 15.356 GiB available main-memory.
# Copyright (c) 1993-July 2008 CWI.
# Copyright (c) August 2008-2014 MonetDB B.V., all rights reserved
# Visit http://www.monetdb.org/ for further information
# Listening for connection requests on mapi:monetdb://uwakai.da.cwi.nl:38959/
# Listening for UNIX domain connection requests on mapi:monetdb:///var/tmp/mtest-1142/.s.monetdb.38959
# MonetDB/GIS module loaded
# MonetDB/SQL module loaded

Ready.

# 17:10:28 >  
# 17:10:28 >  "mclient" "-lsql" "-ftest" "-Eutf-8" "-i" "-e" "--host=/var/tmp/mtest-1142" "--port=38959"
# 17:10:28 >  

#CREATE TABLE PKTABLE ( ptest1 int PRIMARY KEY, ptest2 text );
#CREATE TABLE FKTABLE ( ftest1 int REFERENCES PKTABLE MATCH FULL ON DELETE CASCADE ON UPDATE CASCADE, ftest2 int );
#INSERT INTO PKTABLE VALUES (1, 'Test1');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 'Test2');
[ 1	]
#INSERT INTO PKTABLE VALUES (3, 'Test3');
[ 1	]
#INSERT INTO PKTABLE VALUES (4, 'Test4');
[ 1	]
#INSERT INTO PKTABLE VALUES (5, 'Test5');
[ 1	]
#INSERT INTO FKTABLE VALUES (1, 2);
[ 1	]
#INSERT INTO FKTABLE VALUES (2, 3);
[ 1	]
#INSERT INTO FKTABLE VALUES (3, 4);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 1);
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2 # name
% int,	int # type
% 1,	1 # length
[ 1,	2	]
[ 2,	3	]
[ 3,	4	]
[ NULL,	1	]
#DELETE FROM PKTABLE WHERE ptest1=1;
[ 1	]
#DELETE FROM PKTABLE WHERE ptest1=1;
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2 # name
% int,	int # type
% 1,	1 # length
[ 2,	3	]
[ 3,	4	]
[ NULL,	1	]
#UPDATE PKTABLE SET ptest1=1 WHERE ptest1=2;
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2 # name
% int,	int # type
% 1,	1 # length
[ 2,	3	]
[ 3,	4	]
[ NULL,	1	]
#DROP TABLE FKTABLE;
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE ( ptest1 int, ptest2 int, ptest3 text, PRIMARY KEY(ptest1, ptest2) );
#CREATE TABLE FKTABLE ( ftest1 int, ftest2 int, ftest3 int, CONSTRAINT constrname FOREIGN KEY(ftest1, ftest2) 
#                       REFERENCES PKTABLE MATCH FULL ON DELETE SET NULL ON UPDATE SET NULL);
#INSERT INTO PKTABLE VALUES (1, 2, 'Test1');
[ 1	]
#INSERT INTO PKTABLE VALUES (1, 3, 'Test1-2');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 4, 'Test2');
[ 1	]
#INSERT INTO PKTABLE VALUES (3, 6, 'Test3');
[ 1	]
#INSERT INTO PKTABLE VALUES (4, 8, 'Test4');
[ 1	]
#INSERT INTO PKTABLE VALUES (5, 10, 'Test5');
[ 1	]
#INSERT INTO FKTABLE VALUES (1, 2, 4);
[ 1	]
#INSERT INTO FKTABLE VALUES (1, 3, 5);
[ 1	]
#INSERT INTO FKTABLE VALUES (2, 4, 8);
[ 1	]
#INSERT INTO FKTABLE VALUES (3, 6, 12);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, NULL, 0);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 2, 4);
[ 1	]
#INSERT INTO FKTABLE VALUES (1, NULL, 4);
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3 # name
% int,	int,	int # type
% 1,	1,	2 # length
[ 1,	2,	4	]
[ 1,	3,	5	]
[ 2,	4,	8	]
[ 3,	6,	12	]
[ NULL,	NULL,	0	]
[ NULL,	2,	4	]
[ 1,	NULL,	4	]
#DELETE FROM PKTABLE WHERE ptest1=1 and ptest2=2;
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3 # name
% int,	int,	int # type
% 1,	1,	2 # length
[ NULL,	NULL,	4	]
[ 1,	3,	5	]
[ 2,	4,	8	]
[ 3,	6,	12	]
[ NULL,	NULL,	0	]
[ NULL,	2,	4	]
[ 1,	NULL,	4	]
#DELETE FROM PKTABLE WHERE ptest1=5 and ptest2=10;
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3 # name
% int,	int,	int # type
% 1,	1,	2 # length
[ NULL,	NULL,	4	]
[ 1,	3,	5	]
[ 2,	4,	8	]
[ 3,	6,	12	]
[ NULL,	NULL,	0	]
[ NULL,	2,	4	]
[ 1,	NULL,	4	]
#UPDATE PKTABLE SET ptest1=1 WHERE ptest1=2;
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3 # name
% int,	int,	int # type
% 1,	1,	2 # length
[ NULL,	NULL,	4	]
[ 1,	3,	5	]
[ NULL,	4,	8	]
[ 3,	6,	12	]
[ NULL,	NULL,	0	]
[ NULL,	2,	4	]
[ 1,	NULL,	4	]
#SELECT * FROM PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3 # name
% int,	int,	clob # type
% 1,	1,	7 # length
[ 1,	3,	"Test1-2"	]
[ 1,	4,	"Test2"	]
[ 3,	6,	"Test3"	]
[ 4,	8,	"Test4"	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3 # name
% int,	int,	int # type
% 1,	1,	2 # length
[ NULL,	NULL,	4	]
[ 1,	3,	5	]
[ NULL,	4,	8	]
[ 3,	6,	12	]
[ NULL,	NULL,	0	]
[ NULL,	2,	4	]
[ 1,	NULL,	4	]
#DROP TABLE PKTABLE CASCADE;
#DROP TABLE FKTABLE;
#CREATE TABLE PKTABLE ( ptest1 int, ptest2 int, ptest3 text, PRIMARY KEY(ptest1, ptest2) );
#CREATE TABLE FKTABLE ( ftest1 int DEFAULT -1, ftest2 int DEFAULT -2, ftest3 int, CONSTRAINT constrname2 FOREIGN KEY(ftest1, ftest2) 
#                       REFERENCES PKTABLE MATCH FULL ON DELETE SET DEFAULT ON UPDATE SET DEFAULT);
#INSERT INTO PKTABLE VALUES (-1, -2, 'The Default!');
[ 1	]
#INSERT INTO PKTABLE VALUES (1, 2, 'Test1');
[ 1	]
#INSERT INTO PKTABLE VALUES (1, 3, 'Test1-2');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 4, 'Test2');
[ 1	]
#INSERT INTO PKTABLE VALUES (3, 6, 'Test3');
[ 1	]
#INSERT INTO PKTABLE VALUES (4, 8, 'Test4');
[ 1	]
#INSERT INTO PKTABLE VALUES (5, 10, 'Test5');
[ 1	]
#INSERT INTO FKTABLE VALUES (1, 2, 4);
[ 1	]
#INSERT INTO FKTABLE VALUES (1, 3, 5);
[ 1	]
#INSERT INTO FKTABLE VALUES (2, 4, 8);
[ 1	]
#INSERT INTO FKTABLE VALUES (3, 6, 12);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, NULL, 0);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 2, 4);
[ 1	]
#INSERT INTO FKTABLE VALUES (1, NULL, 4);
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3 # name
% int,	int,	int # type
% 1,	1,	2 # length
[ 1,	2,	4	]
[ 1,	3,	5	]
[ 2,	4,	8	]
[ 3,	6,	12	]
[ NULL,	NULL,	0	]
[ NULL,	2,	4	]
[ 1,	NULL,	4	]
#DELETE FROM PKTABLE WHERE ptest1=1 and ptest2=2;
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3 # name
% int,	int,	int # type
% 2,	2,	2 # length
[ -1,	-2,	4	]
[ 1,	3,	5	]
[ 2,	4,	8	]
[ 3,	6,	12	]
[ NULL,	NULL,	0	]
[ NULL,	2,	4	]
[ 1,	NULL,	4	]
#DELETE FROM PKTABLE WHERE ptest1=5 and ptest2=10;
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3 # name
% int,	int,	int # type
% 2,	2,	2 # length
[ -1,	-2,	4	]
[ 1,	3,	5	]
[ 2,	4,	8	]
[ 3,	6,	12	]
[ NULL,	NULL,	0	]
[ NULL,	2,	4	]
[ 1,	NULL,	4	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3 # name
% int,	int,	int # type
% 2,	2,	2 # length
[ -1,	-2,	4	]
[ 1,	3,	5	]
[ 2,	4,	8	]
[ 3,	6,	12	]
[ NULL,	NULL,	0	]
[ NULL,	2,	4	]
[ 1,	NULL,	4	]
#DROP TABLE PKTABLE CASCADE;
#DROP TABLE FKTABLE;
#CREATE TABLE PKTABLE ( ptest1 int PRIMARY KEY, ptest2 text );
#CREATE TABLE FKTABLE ( ftest1 int REFERENCES PKTABLE MATCH FULL, ftest2 int );
#INSERT INTO PKTABLE VALUES (1, 'Test1');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 'Test2');
[ 1	]
#INSERT INTO PKTABLE VALUES (3, 'Test3');
[ 1	]
#INSERT INTO PKTABLE VALUES (4, 'Test4');
[ 1	]
#INSERT INTO PKTABLE VALUES (5, 'Test5');
[ 1	]
#INSERT INTO FKTABLE VALUES (1, 2);
[ 1	]
#INSERT INTO FKTABLE VALUES (2, 3);
[ 1	]
#INSERT INTO FKTABLE VALUES (3, 4);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 1);
[ 1	]
#SELECT * FROM FKTABLE;
% sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2 # name
% int,	int # type
% 1,	1 # length
[ 1,	2	]
[ 2,	3	]
[ 3,	4	]
[ NULL,	1	]
#SELECT * FROM PKTABLE;
% sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2 # name
% int,	clob # type
% 1,	5 # length
[ 1,	"Test1"	]
[ 2,	"Test2"	]
[ 3,	"Test3"	]
[ 4,	"Test4"	]
[ 5,	"Test5"	]
#DELETE FROM PKTABLE WHERE ptest1=5;
[ 1	]
#SELECT * FROM PKTABLE;
% sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2 # name
% int,	clob # type
% 1,	5 # length
[ 1,	"Test1"	]
[ 2,	"Test2"	]
[ 3,	"Test3"	]
[ 4,	"Test4"	]
#UPDATE PKTABLE SET ptest1=0 WHERE ptest1=4;
[ 1	]
#SELECT * FROM PKTABLE;
% sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2 # name
% int,	clob # type
% 1,	5 # length
[ 1,	"Test1"	]
[ 2,	"Test2"	]
[ 3,	"Test3"	]
[ 0,	"Test4"	]
#DROP TABLE FKTABLE;
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE ( ptest1 int, ptest2 int, ptest3 int, ptest4 text, PRIMARY KEY(ptest1, ptest2, ptest3) );
#CREATE TABLE FKTABLE ( ftest1 int, ftest2 int, ftest3 int, ftest4 int,  CONSTRAINT constrname3
#			FOREIGN KEY(ftest1, ftest2, ftest3) REFERENCES PKTABLE);
#INSERT INTO PKTABLE VALUES (1, 2, 3, 'test1');
[ 1	]
#INSERT INTO PKTABLE VALUES (1, 3, 3, 'test2');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 3, 4, 'test3');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 4, 5, 'test4');
[ 1	]
#INSERT INTO FKTABLE VALUES (1, 2, 3, 1); 
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 2, 3, 2);
[ 1	]
#INSERT INTO FKTABLE VALUES (2, NULL, 3, 3);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 2, 7, 4);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 3, 4, 5);
[ 1	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ 1,	2,	3,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#UPDATE PKTABLE set ptest1=1 WHERE ptest2=3;
[ 2	]
#DELETE FROM PKTABLE where ptest1=2;
[ 1	]
#SELECT * from PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3,	ptest4 # name
% int,	int,	int,	clob # type
% 1,	1,	1,	5 # length
[ 1,	2,	3,	"test1"	]
[ 1,	3,	3,	"test2"	]
[ 1,	3,	4,	"test3"	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ 1,	2,	3,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#DROP TABLE FKTABLE;
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE ( ptest1 int, ptest2 int, ptest3 int, ptest4 text, PRIMARY KEY(ptest1, ptest2, ptest3) );
#CREATE TABLE FKTABLE ( ftest1 int, ftest2 int, ftest3 int, ftest4 int,  CONSTRAINT constrname3
#			FOREIGN KEY(ftest1, ftest2, ftest3) REFERENCES PKTABLE
#			ON DELETE CASCADE ON UPDATE CASCADE);
#INSERT INTO PKTABLE VALUES (1, 2, 3, 'test1');
[ 1	]
#INSERT INTO PKTABLE VALUES (1, 3, 3, 'test2');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 3, 4, 'test3');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 4, 5, 'test4');
[ 1	]
#INSERT INTO FKTABLE VALUES (1, 2, 3, 1); 
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 2, 3, 2);
[ 1	]
#INSERT INTO FKTABLE VALUES (2, NULL, 3, 3);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 2, 7, 4);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 3, 4, 5);
[ 1	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ 1,	2,	3,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#UPDATE PKTABLE set ptest2=5 where ptest2=2;
[ 1	]
#UPDATE PKTABLE set ptest1=1 WHERE ptest2=3;
[ 2	]
#SELECT * from PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3,	ptest4 # name
% int,	int,	int,	clob # type
% 1,	1,	1,	5 # length
[ 1,	5,	3,	"test1"	]
[ 1,	3,	3,	"test2"	]
[ 1,	3,	4,	"test3"	]
[ 2,	4,	5,	"test4"	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ 1,	5,	3,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#DELETE FROM PKTABLE where ptest1=1 and ptest2=5 and ptest3=3;
[ 1	]
#DELETE FROM PKTABLE where ptest1=1 and ptest2=5 and ptest3=3;
[ 1	]
#SELECT * from PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3,	ptest4 # name
% int,	int,	int,	clob # type
% 1,	1,	1,	5 # length
[ 1,	3,	3,	"test2"	]
[ 1,	3,	4,	"test3"	]
[ 2,	4,	5,	"test4"	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#DELETE FROM PKTABLE where ptest1=2;
[ 0	]
#DELETE FROM PKTABLE where ptest1=2;
[ 1	]
#SELECT * from PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3,	ptest4 # name
% int,	int,	int,	clob # type
% 1,	1,	1,	5 # length
[ 1,	3,	3,	"test2"	]
[ 1,	3,	4,	"test3"	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#DROP TABLE FKTABLE;
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE ( ptest1 int, ptest2 int, ptest3 int, ptest4 text, PRIMARY KEY(ptest1, ptest2, ptest3) );
#CREATE TABLE FKTABLE ( ftest1 int DEFAULT 0, ftest2 int, ftest3 int, ftest4 int,  CONSTRAINT constrname3
#			FOREIGN KEY(ftest1, ftest2, ftest3) REFERENCES PKTABLE
#			ON DELETE SET DEFAULT ON UPDATE SET NULL);
#INSERT INTO PKTABLE VALUES (1, 2, 3, 'test1');
[ 1	]
#INSERT INTO PKTABLE VALUES (1, 3, 3, 'test2');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 3, 4, 'test3');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 4, 5, 'test4');
[ 1	]
#INSERT INTO FKTABLE VALUES (1, 2, 3, 1); 
[ 1	]
#INSERT INTO FKTABLE VALUES (2, 3, 4, 1); 
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 2, 3, 2);
[ 1	]
#INSERT INTO FKTABLE VALUES (2, NULL, 3, 3);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 2, 7, 4);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 3, 4, 5);
[ 1	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ 1,	2,	3,	1	]
[ 2,	3,	4,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#UPDATE PKTABLE set ptest2=5 where ptest2=2;
[ 1	]
#UPDATE PKTABLE set ptest2=2 WHERE ptest2=3 and ptest1=1;
[ 1	]
#SELECT * from PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3,	ptest4 # name
% int,	int,	int,	clob # type
% 1,	1,	1,	5 # length
[ 1,	5,	3,	"test1"	]
[ 1,	2,	3,	"test2"	]
[ 2,	3,	4,	"test3"	]
[ 2,	4,	5,	"test4"	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ 1,	NULL,	3,	1	]
[ 2,	3,	4,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#DELETE FROM PKTABLE where ptest1=2 and ptest2=3 and ptest3=4;
[ 1	]
#SELECT * from PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3,	ptest4 # name
% int,	int,	int,	clob # type
% 1,	1,	1,	5 # length
[ 1,	5,	3,	"test1"	]
[ 1,	2,	3,	"test2"	]
[ 2,	4,	5,	"test4"	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ 1,	NULL,	3,	1	]
[ 0,	NULL,	NULL,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#DELETE FROM PKTABLE where ptest2=5;
[ 1	]
#SELECT * from PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3,	ptest4 # name
% int,	int,	int,	clob # type
% 1,	1,	1,	5 # length
[ 1,	2,	3,	"test2"	]
[ 2,	4,	5,	"test4"	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ 1,	NULL,	3,	1	]
[ 0,	NULL,	NULL,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#DROP TABLE FKTABLE;
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE ( ptest1 int, ptest2 int, ptest3 int, ptest4 text, PRIMARY KEY(ptest1, ptest2, ptest3) );
#CREATE TABLE FKTABLE ( ftest1 int DEFAULT 0, ftest2 int DEFAULT -1, ftest3 int, ftest4 int,  CONSTRAINT constrname3
#			FOREIGN KEY(ftest1, ftest2, ftest3) REFERENCES PKTABLE
#			ON DELETE SET NULL ON UPDATE SET DEFAULT);
#INSERT INTO PKTABLE VALUES (1, 2, 3, 'test1');
[ 1	]
#INSERT INTO PKTABLE VALUES (1, 3, 3, 'test2');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 3, 4, 'test3');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, 4, 5, 'test4');
[ 1	]
#INSERT INTO PKTABLE VALUES (2, -1, 5, 'test5');
[ 1	]
#INSERT INTO FKTABLE VALUES (1, 2, 3, 1); 
[ 1	]
#INSERT INTO FKTABLE VALUES (2, 3, 4, 1); 
[ 1	]
#INSERT INTO FKTABLE VALUES (2, 4, 5, 1);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 2, 3, 2);
[ 1	]
#INSERT INTO FKTABLE VALUES (2, NULL, 3, 3);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 2, 7, 4);
[ 1	]
#INSERT INTO FKTABLE VALUES (NULL, 3, 4, 5);
[ 1	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	1,	1,	1 # length
[ 1,	2,	3,	1	]
[ 2,	3,	4,	1	]
[ 2,	4,	5,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#UPDATE PKTABLE set ptest1=0, ptest2=5, ptest3=10 where ptest2=2;
[ 1	]
#UPDATE PKTABLE set ptest2=10 where ptest2=4;
[ 1	]
#UPDATE PKTABLE set ptest2=2 WHERE ptest2=3 and ptest1=1;
[ 1	]
#SELECT * from PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3,	ptest4 # name
% int,	int,	int,	clob # type
% 1,	2,	2,	5 # length
[ 0,	5,	10,	"test1"	]
[ 1,	2,	3,	"test2"	]
[ 2,	3,	4,	"test3"	]
[ 2,	10,	5,	"test4"	]
[ 2,	-1,	5,	"test5"	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	2,	1,	1 # length
[ 0,	-1,	NULL,	1	]
[ 2,	3,	4,	1	]
[ 2,	-1,	5,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#DELETE FROM PKTABLE where ptest1=2 and ptest2=3 and ptest3=4;
[ 1	]
#SELECT * from PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3,	ptest4 # name
% int,	int,	int,	clob # type
% 1,	2,	2,	5 # length
[ 0,	5,	10,	"test1"	]
[ 1,	2,	3,	"test2"	]
[ 2,	10,	5,	"test4"	]
[ 2,	-1,	5,	"test5"	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	2,	1,	1 # length
[ 0,	-1,	NULL,	1	]
[ NULL,	NULL,	NULL,	1	]
[ 2,	-1,	5,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#DELETE FROM PKTABLE where ptest2=5;
[ 1	]
#SELECT * from PKTABLE;
% sys.pktable,	sys.pktable,	sys.pktable,	sys.pktable # table_name
% ptest1,	ptest2,	ptest3,	ptest4 # name
% int,	int,	int,	clob # type
% 1,	2,	1,	5 # length
[ 1,	2,	3,	"test2"	]
[ 2,	10,	5,	"test4"	]
[ 2,	-1,	5,	"test5"	]
#SELECT * from FKTABLE;
% sys.fktable,	sys.fktable,	sys.fktable,	sys.fktable # table_name
% ftest1,	ftest2,	ftest3,	ftest4 # name
% int,	int,	int,	int # type
% 1,	2,	1,	1 # length
[ 0,	-1,	NULL,	1	]
[ NULL,	NULL,	NULL,	1	]
[ 2,	-1,	5,	1	]
[ NULL,	2,	3,	2	]
[ 2,	NULL,	3,	3	]
[ NULL,	2,	7,	4	]
[ NULL,	3,	4,	5	]
#DROP TABLE FKTABLE;
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE (ptest1 int PRIMARY KEY);
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE (ptest1 int, ptest2 int, UNIQUE(ptest1, ptest2));
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE (ptest1 int PRIMARY KEY);
#CREATE TABLE FKTABLE (ftest1 inet REFERENCES pktable);
#DROP TABLE FKTABLE;
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE (ptest1 int, ptest2 inet, PRIMARY KEY(ptest1, ptest2));
#CREATE TABLE FKTABLE (ftest1 int, ftest2 inet, FOREIGN KEY(ftest2, ftest1) REFERENCES pktable);
#DROP TABLE FKTABLE;
#CREATE TABLE FKTABLE (ftest1 int, ftest2 inet, FOREIGN KEY(ftest1, ftest2) REFERENCES pktable(ptest1, ptest2));
#DROP TABLE FKTABLE;
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE (ptest1 int, ptest2 inet, ptest3 int, ptest4 inet, PRIMARY KEY(ptest1, ptest2), FOREIGN KEY(ptest3,
#ptest4) REFERENCES pktable(ptest1, ptest2));
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE (ptest1 int, ptest2 inet, ptest3 int, ptest4 inet, PRIMARY KEY(ptest1, ptest2), FOREIGN KEY(ptest3,
#ptest4) REFERENCES pktable);
#DROP TABLE PKTABLE;
#CREATE TABLE PKTABLE (ptest1 int, ptest2 inet, ptest3 int, ptest4 inet, PRIMARY KEY(ptest1, ptest2), FOREIGN KEY(ptest4,
#ptest3) REFERENCES pktable(ptest1, ptest2));
#create table pktable_base (base1 int not null);
#delete from pktable;
[ 0	]
#drop table pktable;
#drop table pktable_base;
#create table pktable_base(base1 int not null, base2 int);
#drop table pktable_base;
#create table pktable_base(base1 int not null);
#drop table pktable_base;
#create table pktable_base(base1 int not null, base2 int);
#drop table pktable_base;
#CREATE TABLE pktable (
#	id		integer PRIMARY KEY,
#	other	integer
#);
#START TRANSACTION;
#START TRANSACTION;
#START TRANSACTION;
#START TRANSACTION;
#START TRANSACTION;
#CREATE TEMP TABLE pktable (
#        id1     integer PRIMARY KEY,
#        id2     VARCHAR(4) UNIQUE,
#        id3     REAL UNIQUE,
#        UNIQUE(id1, id2, id3)
#);
#CREATE TEMP TABLE fktable (
#        x1      integer REFERENCES pktable(id1),
#        x2      VARCHAR(4) REFERENCES pktable(id2),
#        x3      REAL REFERENCES pktable(id3),
#        x4      TEXT,
#        x5      smallint
#);

# 17:10:29 >  
# 17:10:29 >  "Done."
# 17:10:29 >  

