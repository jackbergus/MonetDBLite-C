stdout of test 'inet` in directory 'sql/test/pg_regress` itself:


# 17:11:18 >  
# 17:11:18 >  "mserver5" "--debug=10" "--set" "gdk_nr_threads=0" "--set" "mapi_open=true" "--set" "mapi_port=38959" "--set" "mapi_usock=/var/tmp/mtest-1142/.s.monetdb.38959" "--set" "monet_prompt=" "--forcemito" "--set" "mal_listing=2" "--dbpath=/ufs/dinther/INSTALL/var/MonetDB/mTests_sql_test_pg_regress" "--set" "mal_listing=0"
# 17:11:18 >  

# MonetDB 5 server v11.18.0
# This is an unreleased version
# Serving database 'mTests_sql_test_pg_regress', using 8 threads
# Compiled for x86_64-unknown-linux-gnu/64bit with 64bit OIDs dynamically linked
# Found 15.356 GiB available main-memory.
# Copyright (c) 1993-July 2008 CWI.
# Copyright (c) August 2008-2014 MonetDB B.V., all rights reserved
# Visit http://www.monetdb.org/ for further information
# Listening for connection requests on mapi:monetdb://uwakai.da.cwi.nl:38959/
# Listening for UNIX domain connection requests on mapi:monetdb:///var/tmp/mtest-1142/.s.monetdb.38959
# MonetDB/GIS module loaded
# MonetDB/SQL module loaded

Ready.

# 17:11:19 >  
# 17:11:19 >  "mclient" "-lsql" "-ftest" "-Eutf-8" "-i" "-e" "--host=/var/tmp/mtest-1142" "--port=38959"
# 17:11:19 >  

= ! Correct / expected output still needs to be provided / verified / approved ! =

#--
#-- INET
#--
#-- prepare the table...
#
#CREATE TABLE INET_TBL (c cidr, i inet);
#INSERT INTO INET_TBL (c, i) VALUES ('192.168.1', '192.168.1.226/24');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('192.168.1.0/26', '192.168.1.226');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('192.168.1', '192.168.1.0/24');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('192.168.1', '192.168.1.0/25');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('192.168.1', '192.168.1.255/24');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('192.168.1', '192.168.1.255/25');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('10', '10.1.2.3/8');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('10.0.0.0', '10.1.2.3/8');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('10.1.2.3', '10.1.2.3/32');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('10.1.2', '10.1.2.3/24');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('10.1', '10.1.2.3/16');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('10', '10.1.2.3/8');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('10', '11.1.2.3/8');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('10', '9.1.2.3/8');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('10:23::f1', '10:23::f1/64');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('10:23::8000/113', '10:23::ffff');
[ 1 ]
#INSERT INTO INET_TBL (c, i) VALUES ('::ffff:1.2.3.4', '::4.3.2.1/24');
[ 1 ]
#-- check that CIDR rejects invalid input:
#
#-- check that CIDR rejects invalid input when converting from text:
#SELECT '' AS ten, c AS cidr, i AS inet FROM INET_TBL;
% sys.L0,	sys.L0,	sys.L0 # table_name
% ten,	cidr,	inet # name
% ?,	?,	? # type
% ?,	?,	? # length
[ "",	"192.168.1.0/24",	"192.168.1.226/24" ]
[ "",	"192.168.1.0/26",	"192.168.1.226" ]
[ "",	"192.168.1.0/24",	"192.168.1.0/24" ]
[ "",	"192.168.1.0/24",	"192.168.1.0/25" ]
[ "",	"192.168.1.0/24",	"192.168.1.255/24" ]
[ "",	"192.168.1.0/24",	"192.168.1.255/25" ]
[ "",	"10.0.0.0/8",	"10.1.2.3/8" ]
[ "",	"10.0.0.0/32",	"10.1.2.3/8" ]
[ "",	"10.1.2.3/32",	"10.1.2.3" ]
[ "",	"10.1.2.0/24",	"10.1.2.3/24" ]
[ "",	"10.1.0.0/16",	"10.1.2.3/16" ]
[ "",	"10.0.0.0/8",	"10.1.2.3/8" ]
[ "",	"10.0.0.0/8",	"11.1.2.3/8" ]
[ "",	"10.0.0.0/8",	"9.1.2.3/8" ]
[ "",	"10:23::f1/128",	"10:23::f1/64" ]
[ "",	"10:23::8000/113",	"10:23::ffff" ]
[ "",	"::ffff:1.2.3.4/128",	"::4.3.2.1/24" ]

#-- now test some support functions
#SELECT '' AS ten, i AS inet, host(i), text(i), family(i) FROM INET_TBL;
% sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0 # table_name
% ten,	inet,	host,	text,	family # name
% ?,	?,	?,	?,	? # type
% ?,	?,	?,	?,	? # length
[ "",	"192.168.1.226/24",	"192.168.1.226",	"192.168.1.226/24",	4 ]
[ "",	"192.168.1.226",	"192.168.1.226",	"192.168.1.226/32",	4 ]
[ "",	"192.168.1.0/24",	"192.168.1.0",	"192.168.1.0/24",	4 ]
[ "",	"192.168.1.0/25",	"192.168.1.0",	"192.168.1.0/25",	4 ]
[ "",	"192.168.1.255/24",	"192.168.1.255",	"192.168.1.255/24",	4 ]
[ "",	"192.168.1.255/25",	"192.168.1.255",	"192.168.1.255/25",	4 ]
[ "",	"10.1.2.3/8",	"10.1.2.3",	"10.1.2.3/8",	4 ]
[ "",	"10.1.2.3/8",	"10.1.2.3",	"10.1.2.3/8",	4 ]
[ "",	"10.1.2.3",	"10.1.2.3",	"10.1.2.3/32",	4 ]
[ "",	"10.1.2.3/24",	"10.1.2.3",	"10.1.2.3/24",	4 ]
[ "",	"10.1.2.3/16",	"10.1.2.3",	"10.1.2.3/16",	4 ]
[ "",	"10.1.2.3/8",	"10.1.2.3",	"10.1.2.3/8",	4 ]
[ "",	"11.1.2.3/8",	"11.1.2.3",	"11.1.2.3/8",	4 ]
[ "",	"9.1.2.3/8",	"9.1.2.3",	"9.1.2.3/8",	4 ]
[ "",	"10:23::f1/64",	"10:23::f1",	"10:23::f1/64",	6 ]
[ "",	"10:23::ffff",	"10:23::ffff",	"10:23::ffff/128",	6 ]
[ "",	"::4.3.2.1/24",	"::4.3.2.1",	"::4.3.2.1/24",	6 ]

#SELECT '' AS ten, c AS cidr, broadcast(c),
#  i AS inet, broadcast(i) FROM INET_TBL;
% sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0 # table_name
% ten,	cidr,	broadcast,	inet,	broadcast # name
% ?,	?,	?,	?,	? # type
% ?,	?,	?,	?,	? # length
[ "",	"192.168.1.0/24",	"192.168.1.255/24",	"192.168.1.226/24",	"192.168.1.255/24" ]
[ "",	"192.168.1.0/26",	"192.168.1.63/26",	"192.168.1.226",	"192.168.1.226" ]
[ "",	"192.168.1.0/24",	"192.168.1.255/24",	"192.168.1.0/24",	"192.168.1.255/24" ]
[ "",	"192.168.1.0/24",	"192.168.1.255/24",	"192.168.1.0/25",	"192.168.1.127/25" ]
[ "",	"192.168.1.0/24",	"192.168.1.255/24",	"192.168.1.255/24",	"192.168.1.255/24" ]
[ "",	"192.168.1.0/24",	"192.168.1.255/24",	"192.168.1.255/25",	"192.168.1.255/25" ]
[ "",	"10.0.0.0/8",	"10.255.255.255/8",	"10.1.2.3/8",	"10.255.255.255/8" ]
[ "",	"10.0.0.0/32",	"10.0.0.0",	"10.1.2.3/8",	"10.255.255.255/8" ]
[ "",	"10.1.2.3/32",	"10.1.2.3",	"10.1.2.3",	"10.1.2.3" ]
[ "",	"10.1.2.0/24",	"10.1.2.255/24",	"10.1.2.3/24",	"10.1.2.255/24" ]
[ "",	"10.1.0.0/16",	"10.1.255.255/16",	"10.1.2.3/16",	"10.1.255.255/16" ]
[ "",	"10.0.0.0/8",	"10.255.255.255/8",	"10.1.2.3/8",	"10.255.255.255/8" ]
[ "",	"10.0.0.0/8",	"10.255.255.255/8",	"11.1.2.3/8",	"11.255.255.255/8" ]
[ "",	"10.0.0.0/8",	"10.255.255.255/8",	"9.1.2.3/8",	"9.255.255.255/8" ]
[ "",	"10:23::f1/128",	"10:23::f1",	"10:23::f1/64",	"10:23::ffff:ffff:ffff:ffff/64" ]
[ "",	"10:23::8000/113",	"10:23::ffff/113",	"10:23::ffff",	"10:23::ffff" ]
[ "",	"::ffff:1.2.3.4/128",	"::ffff:1.2.3.4",	"::4.3.2.1/24",	"0:ff:ffff:ffff:ffff:ffff:ffff:ffff/24" ]

#SELECT '' AS ten, c AS cidr, network(c) AS "network(cidr)",
#  i AS inet, network(i) AS "network(inet)" FROM INET_TBL;
% sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0 # table_name
% ten,	cidr,	network(cidr),	inet,	network(inet) # name
% ?,	?,	?,	?,	? # type
% ?,	?,	?,	?,	? # length
[ "",	"192.168.1.0/24",	"192.168.1.0/24",	"192.168.1.226/24",	"192.168.1.0/24" ]
[ "",	"192.168.1.0/26",	"192.168.1.0/26",	"192.168.1.226",	"192.168.1.226/32" ]
[ "",	"192.168.1.0/24",	"192.168.1.0/24",	"192.168.1.0/24",	"192.168.1.0/24" ]
[ "",	"192.168.1.0/24",	"192.168.1.0/24",	"192.168.1.0/25",	"192.168.1.0/25" ]
[ "",	"192.168.1.0/24",	"192.168.1.0/24",	"192.168.1.255/24",	"192.168.1.0/24" ]
[ "",	"192.168.1.0/24",	"192.168.1.0/24",	"192.168.1.255/25",	"192.168.1.128/25" ]
[ "",	"10.0.0.0/8",	"10.0.0.0/8",	"10.1.2.3/8",	"10.0.0.0/8" ]
[ "",	"10.0.0.0/32",	"10.0.0.0/32",	"10.1.2.3/8",	"10.0.0.0/8" ]
[ "",	"10.1.2.3/32",	"10.1.2.3/32",	"10.1.2.3",	"10.1.2.3/32" ]
[ "",	"10.1.2.0/24",	"10.1.2.0/24",	"10.1.2.3/24",	"10.1.2.0/24" ]
[ "",	"10.1.0.0/16",	"10.1.0.0/16",	"10.1.2.3/16",	"10.1.0.0/16" ]
[ "",	"10.0.0.0/8",	"10.0.0.0/8",	"10.1.2.3/8",	"10.0.0.0/8" ]
[ "",	"10.0.0.0/8",	"10.0.0.0/8",	"11.1.2.3/8",	"11.0.0.0/8" ]
[ "",	"10.0.0.0/8",	"10.0.0.0/8",	"9.1.2.3/8",	"9.0.0.0/8" ]
[ "",	"10:23::f1/128",	"10:23::f1/128",	"10:23::f1/64",	"10:23::/64" ]
[ "",	"10:23::8000/113",	"10:23::8000/113",	"10:23::ffff",	"10:23::ffff/128" ]
[ "",	"::ffff:1.2.3.4/128",	"::ffff:1.2.3.4/128",	"::4.3.2.1/24",	"::/24" ]

#SELECT '' AS ten, c AS cidr, masklen(c) AS "masklen(cidr)",
#  i AS inet, masklen(i) AS "masklen(inet)" FROM INET_TBL;
% sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0 # table_name
% ten,	cidr,	masklen(cidr),	inet,	masklen(inet) # name
% ?,	?,	?,	?,	? # type
% ?,	?,	?,	?,	? # length
[ "",	"192.168.1.0/24",	24,	"192.168.1.226/24",	24 ]
[ "",	"192.168.1.0/26",	26,	"192.168.1.226",	32 ]
[ "",	"192.168.1.0/24",	24,	"192.168.1.0/24",	24 ]
[ "",	"192.168.1.0/24",	24,	"192.168.1.0/25",	25 ]
[ "",	"192.168.1.0/24",	24,	"192.168.1.255/24",	24 ]
[ "",	"192.168.1.0/24",	24,	"192.168.1.255/25",	25 ]
[ "",	"10.0.0.0/8",	8,	"10.1.2.3/8",	8 ]
[ "",	"10.0.0.0/32",	32,	"10.1.2.3/8",	8 ]
[ "",	"10.1.2.3/32",	32,	"10.1.2.3",	32 ]
[ "",	"10.1.2.0/24",	24,	"10.1.2.3/24",	24 ]
[ "",	"10.1.0.0/16",	16,	"10.1.2.3/16",	16 ]
[ "",	"10.0.0.0/8",	8,	"10.1.2.3/8",	8 ]
[ "",	"10.0.0.0/8",	8,	"11.1.2.3/8",	8 ]
[ "",	"10.0.0.0/8",	8,	"9.1.2.3/8",	8 ]
[ "",	"10:23::f1/128",	128,	"10:23::f1/64",	64 ]
[ "",	"10:23::8000/113",	113,	"10:23::ffff",	128 ]
[ "",	"::ffff:1.2.3.4/128",	128,	"::4.3.2.1/24",	24 ]

#SELECT '' AS four, c AS cidr, masklen(c) AS "masklen(cidr)",
#  i AS inet, masklen(i) AS "masklen(inet)" FROM INET_TBL
#  WHERE masklen(c) <= 8;
% sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0 # table_name
% four,	cidr,	masklen(cidr),	inet,	masklen(inet) # name
% ?,	?,	?,	?,	? # type
% ?,	?,	?,	?,	? # length
[ "",	"10.0.0.0/8",	8,	"10.1.2.3/8",	8 ]
[ "",	"10.0.0.0/8",	8,	"10.1.2.3/8",	8 ]
[ "",	"10.0.0.0/8",	8,	"11.1.2.3/8",	8 ]
[ "",	"10.0.0.0/8",	8,	"9.1.2.3/8",	8 ]

#SELECT '' AS six, c AS cidr, i AS inet FROM INET_TBL
#  WHERE c = i;
% sys.L0,	sys.L0,	sys.L0 # table_name
% six,	cidr,	inet # name
% ?,	?,	? # type
% ?,	?,	? # length
[ "",	"192.168.1.0/24",	"192.168.1.0/24" ]
[ "",	"10.1.2.3/32",	"10.1.2.3" ]

#SELECT '' AS ten, i, c,
#  i < c AS lt, i <= c AS le, i = c AS eq, 
#  i >= c AS ge, i > c AS gt, i <> c AS ne,
#  i << c AS sb, i <<= c AS sbe,
#  i >> c AS sup, i >>= c AS spe
#  FROM INET_TBL;
% sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0,	sys.L0 # table_name
% ten,	i,	c,	lt,	le,	eq,	ge,	gt,	ne,	sb,	sbe,	sup,	spe # name
% ?,	?,	?,	?,	?,	?,	?,	?,	?,	?,	?,	?,	? # type
% ?,	?,	?,	?,	?,	?,	?,	?,	?,	?,	?,	?,	? # length
[ "",	"192.168.1.226/24",	"192.168.1.0/24",	"f",	"f",	"f",	"t",	"t",	"t",	"f",	"t",	"f",	"t" ]
[ "",	"192.168.1.226",	"192.168.1.0/26",	"f",	"f",	"f",	"t",	"t",	"t",	"f",	"f",	"f",	"f" ]
[ "",	"192.168.1.0/24",	"192.168.1.0/24",	"f",	"t",	"t",	"t",	"f",	"f",	"f",	"t",	"f",	"t" ]
[ "",	"192.168.1.0/25",	"192.168.1.0/24",	"f",	"f",	"f",	"t",	"t",	"t",	"t",	"t",	"f",	"f" ]
[ "",	"192.168.1.255/24",	"192.168.1.0/24",	"f",	"f",	"f",	"t",	"t",	"t",	"f",	"t",	"f",	"t" ]
[ "",	"192.168.1.255/25",	"192.168.1.0/24",	"f",	"f",	"f",	"t",	"t",	"t",	"t",	"t",	"f",	"f" ]
[ "",	"10.1.2.3/8",	"10.0.0.0/8",	"f",	"f",	"f",	"t",	"t",	"t",	"f",	"t",	"f",	"t" ]
[ "",	"10.1.2.3/8",	"10.0.0.0/32",	"t",	"t",	"f",	"f",	"f",	"t",	"f",	"f",	"t",	"t" ]
[ "",	"10.1.2.3",	"10.1.2.3/32",	"f",	"t",	"t",	"t",	"f",	"f",	"f",	"t",	"f",	"t" ]
[ "",	"10.1.2.3/24",	"10.1.2.0/24",	"f",	"f",	"f",	"t",	"t",	"t",	"f",	"t",	"f",	"t" ]
[ "",	"10.1.2.3/16",	"10.1.0.0/16",	"f",	"f",	"f",	"t",	"t",	"t",	"f",	"t",	"f",	"t" ]
[ "",	"10.1.2.3/8",	"10.0.0.0/8",	"f",	"f",	"f",	"t",	"t",	"t",	"f",	"t",	"f",	"t" ]
[ "",	"11.1.2.3/8",	"10.0.0.0/8",	"f",	"f",	"f",	"t",	"t",	"t",	"f",	"f",	"f",	"f" ]
[ "",	"9.1.2.3/8",	"10.0.0.0/8",	"t",	"t",	"f",	"f",	"f",	"t",	"f",	"f",	"f",	"f" ]
[ "",	"10:23::f1/64",	"10:23::f1/128",	"t",	"t",	"f",	"f",	"f",	"t",	"f",	"f",	"t",	"t" ]
[ "",	"10:23::ffff",	"10:23::8000/113",	"f",	"f",	"f",	"t",	"t",	"t",	"t",	"t",	"f",	"f" ]
[ "",	"::4.3.2.1/24",	"::ffff:1.2.3.4/128",	"t",	"t",	"f",	"f",	"f",	"t",	"f",	"f",	"t",	"t" ]

#-- check the conversion to/from text and set_netmask
#SELECT '' AS ten, set_masklen(inet(text(i)), 24) FROM INET_TBL;
% sys.L0,	sys.L0 # table_name
% ten,	set_masklen # name
% ?,	? # type
% ?,	? # length
[ "",	"192.168.1.226/24" ]
[ "",	"192.168.1.226/24" ]
[ "",	"192.168.1.0/24" ]
[ "",	"192.168.1.0/24" ]
[ "",	"192.168.1.255/24" ]
[ "",	"192.168.1.255/24" ]
[ "",	"10.1.2.3/24" ]
[ "",	"10.1.2.3/24" ]
[ "",	"10.1.2.3/24" ]
[ "",	"10.1.2.3/24" ]
[ "",	"10.1.2.3/24" ]
[ "",	"10.1.2.3/24" ]
[ "",	"11.1.2.3/24" ]
[ "",	"9.1.2.3/24" ]
[ "",	"10:23::f1/24" ]
[ "",	"10:23::ffff/24" ]
[ "",	"::4.3.2.1/24" ]

#-- check that index works correctly
#CREATE INDEX inet_idx1 ON inet_tbl(i);
SET enable_seqscan TO off;
#SELECT * FROM inet_tbl WHERE i<<'192.168.1.0/24'::cidr;
% sys.L0,	sys.L0 # table_name
% c,	i # name
% ?,	? # type
% ?,	? # length
[ "192.168.1.0/24",	"192.168.1.0/25" ]
[ "192.168.1.0/24",	"192.168.1.255/25" ]
[ "192.168.1.0/26",	"192.168.1.226" ]

#SELECT * FROM inet_tbl WHERE i<<='192.168.1.0/24'::cidr;
% sys.L0,	sys.L0 # table_name
% c,	i # name
% ?,	? # type
% ?,	? # length
[ "192.168.1.0/24",	"192.168.1.0/24" ]
[ "192.168.1.0/24",	"192.168.1.226/24" ]
[ "192.168.1.0/24",	"192.168.1.255/24" ]
[ "192.168.1.0/24",	"192.168.1.0/25" ]
[ "192.168.1.0/24",	"192.168.1.255/25" ]
[ "192.168.1.0/26",	"192.168.1.226" ]

SET enable_seqscan TO on;
#DROP INDEX inet_idx1;

= ! Correct / expected output still needs to be provided / verified / approved ! =

# 17:11:19 >  
# 17:11:19 >  "Done."
# 17:11:19 >  

