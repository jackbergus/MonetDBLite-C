stdout of test 'jsonstore00` in directory 'sql/backends/monet5/rest` itself:


# 10:04:37 >  
# 10:04:37 >  "mserver5" "--debug=10" "--set" "gdk_nr_threads=0" "--set" "mapi_open=true" "--set" "mapi_port=33859" "--set" "mapi_usock=/var/tmp/mtest-6476/.s.monetdb.33859" "--set" "monet_prompt=" "--forcemito" "--set" "mal_listing=2" "--dbpath=/export/scratch2/rijke/monetdb/default/var/MonetDB/mTests_sql_backends_monet5_rest" "--set" "mal_listing=0"
# 10:04:37 >  

# MonetDB 5 server v11.16.0
# This is an unreleased version
# Serving database 'mTests_sql_backends_monet5_rest', using 8 threads
# Compiled for x86_64-unknown-linux-gnu/64bit with 64bit OIDs dynamically linked
# Found 15.592 GiB available main-memory.
# Copyright (c) 1993-July 2008 CWI.
# Copyright (c) August 2008-2015 MonetDB B.V., all rights reserved
# Visit http://www.monetdb.org/ for further information
# Listening for connection requests on mapi:monetdb://rotterdam.ins.cwi.nl:33859/
# Listening for UNIX domain connection requests on mapi:monetdb:///var/tmp/mtest-6476/.s.monetdb.33859
# MonetDB/GIS module loaded
# MonetDB/JAQL module loaded
# MonetDB/SQL module loaded

Ready.
# SQL catalog created, loading sql scripts once
# loading sql script: 09_like.sql
# loading sql script: 10_math.sql
# loading sql script: 11_times.sql
# loading sql script: 12_url.sql
# loading sql script: 13_date.sql
# loading sql script: 14_inet.sql
# loading sql script: 15_querylog.sql
# loading sql script: 16_tracelog.sql
# loading sql script: 17_compress.sql
# loading sql script: 18_dictionary.sql
# loading sql script: 19_cluster.sql
# loading sql script: 20_vacuum.sql
# loading sql script: 21_dependency_functions.sql
# loading sql script: 22_clients.sql
# loading sql script: 23_skyserver.sql
# loading sql script: 24_zorder.sql
# loading sql script: 25_debug.sql
# loading sql script: 26_sysmon.sql
# loading sql script: 39_analytics.sql
# loading sql script: 40_geom.sql
# loading sql script: 40_json.sql
# loading sql script: 41_jsonstore.sql
# loading sql script: 45_uuid.sql
# loading sql script: 75_storagemodel.sql
# loading sql script: 80_statistics.sql
# loading sql script: 80_udf.sql
# loading sql script: 99_system.sql

# 10:04:37 >  
# 10:04:37 >  "mclient" "-lsql" "-ftest" "-Eutf-8" "-i" "-e" "--host=/var/tmp/mtest-6476" "--port=33859"
# 10:04:37 >  

#SELECT 'Unknown' AS error;
% .L # table_name
% error # name
% char # type
% 7 # length
[ "Unknown"	]
#SELECT 'Welcome' AS jsonstore, '(unreleased)' AS version;
% .L,	.L # table_name
% jsonstore,	version # name
% char,	char # type
% 7,	12 # length
[ "Welcome",	"(unreleased)"	]
#CREATE TABLE json_first (
#  _id uuid, _rev VARCHAR(34),
#  js json);
#CREATE TABLE jsondesign_first (
#  _id varchar(128),
#  _rev VARCHAR(34),
#  design json);
#CREATE TABLE jsonblob_first (
#  _id uuid,
#  mimetype varchar(128),
#  filename varchar(128),
#  value blob);
#CREATE FUNCTION first_update_doc
#( doc_id VARCHAR(36),
#  doc json )
#  RETURNS TABLE ( OK BOOLEAN )
#BEGIN
# DECLARE ISNEW INTEGER;
# DECLARE VERSION INT;
# DECLARE NEWVER VARCHAR(6);
# SET ISNEW = (SELECT
#  COUNT(*) FROM json_first
#  WHERE _id = doc_id);
#   IF (ISNEW = 0) THEN
#    SET NEWVER = '1';
#   ELSE
#    SET VERSION = (
#     SELECT MAX(
#      CAST(
#       SUBSTRING(_rev,
#        1,POSITION('-'
#         IN _rev) - 1)
#       AS INT) + 1)
#     FROM json_first
#     WHERE _id =
#      doc_id);
#     SET NEWVER =
#SELECT SUBSTRING(name, 6, length(name) -5) AS name 
#FROM tables 
#WHERE name LIKE 'json!_%'ESCAPE'!';
% .L # table_name
% name # name
% varchar # type
% 5 # length
[ "first"	]
#INSERT INTO json_first (_id, _rev, js) 
#VALUES ('4b5b0c91-61f3-46db-b279-1535c8e2bd41', concat('1-', md5('{}')), '{}');
[ 1	]
#SELECT * FROM json_first;
% sys.json_first,	sys.json_first,	sys.json_first # table_name
% _id,	_rev,	js # name
% uuid,	varchar,	json # type
% 0,	34,	2 # length
[ 4b5b0c91-61f3-46db-b279-1535c8e2bd41,	"1-99914b932bd37a50b983c5e7c90ae93b",	"{}"	]
#WITH curr_first(maxrev, _id) AS (
#  SELECT MAX(CAST(SUBSTRING(_rev,1,POSITION('-' IN _rev) - 1) AS INT)), 
#         _id
#  FROM json_first
#  GROUP BY _id) 
#SELECT json_first._id, 
#       json_first._rev, 
#       json_first.js 
#FROM curr_first, 
#     json_first
#WHERE curr_first._id = json_first._id
#AND curr_first.maxrev = CAST(SUBSTRING(_rev,1,POSITION('-' IN _rev) - 1) AS INT);
% sys.json_first,	sys.json_first,	sys.json_first # table_name
% _id,	_rev,	js # name
% uuid,	varchar,	json # type
% 0,	34,	2 # length
[ 4b5b0c91-61f3-46db-b279-1535c8e2bd41,	"1-99914b932bd37a50b983c5e7c90ae93b",	"{}"	]
#SELECT * FROM json_first WHERE _id = '4b5b0c91-61f3-46db-b279-1535c8e2bd41';
% sys.json_first,	sys.json_first,	sys.json_first # table_name
% _id,	_rev,	js # name
% uuid,	varchar,	json # type
% 0,	34,	2 # length
[ 4b5b0c91-61f3-46db-b279-1535c8e2bd41,	"1-99914b932bd37a50b983c5e7c90ae93b",	"{}"	]
#WITH curr_first(maxrev, _id) AS (
#  SELECT MAX(CAST(SUBSTRING(_rev,1,POSITION('-' IN _rev) - 1) AS INT)), 
#         _id
#  FROM json_first
#  WHERE _id = '4b5b0c91-61f3-46db-b279-1535c8e2bd41'
#  GROUP BY _id) 
#SELECT json_first._id, 
#       json_first._rev, 
#       json_first.js 
#FROM curr_first, 
#     json_first
#WHERE curr_first._id = json_first._id
#AND curr_first.maxrev = CAST(SUBSTRING(_rev,1,POSITION('-' IN _rev) - 1) AS INT);
% sys.json_first,	sys.json_first,	sys.json_first # table_name
% _id,	_rev,	js # name
% uuid,	varchar,	json # type
% 0,	34,	2 # length
[ 4b5b0c91-61f3-46db-b279-1535c8e2bd41,	"1-99914b932bd37a50b983c5e7c90ae93b",	"{}"	]
#SELECT * FROM first_update_doc ('4b5b0c91-61f3-46db-b279-1535c8e2bd41', '{"message":"hello world"}');
% . # table_name
% ok # name
% boolean # type
% 5 # length
[ true	]
#DELETE FROM json_first WHERE _id = '4b5b0c91-61f3-46db-b279-1535c8e2bd41';
[ 2	]
#DROP FUNCTION first_update_doc;
#DROP TABLE json_first;
#DROP TABLE jsonblob_first;
#DROP TABLE jsondesign_first;
#SELECT 'Missing Database Name' AS error;
% .L # table_name
% error # name
% char # type
% 21 # length
[ "Missing Database Name"	]
#SELECT 'No Parameter Allowed' AS error;
% .L # table_name
% error # name
% char # type
% 21 # length
[ "No Parameter Allowed"	]
#SELECT 'Missing Attachment PATH' AS error;
% .L # table_name
% error # name
% char # type
% 23 # length
[ "Missing Attachment PATH"	]

# 10:04:38 >  
# 10:04:38 >  "Done."
# 10:04:38 >  

