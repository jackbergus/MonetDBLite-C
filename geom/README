
This "geom" directory contains the nessesary configure files and scripts
to build a simple example module (src/monetdb4/geom.mx) for the MonetDB database
engine.


Prerequisites
=============

Before compiling the "geom" module, make sure you have version 4.16 (or
newer) of MonetDB installed, and "monetdb-config" is reachable via your
$PATH.
See http://monetdb.cwi.nl/ for details.

Further, make sure that you also have the "buildtools" installed, and
"autogen.py", "Mx" and "mel" are reachable via your $PATH.
You can get the "buildtools" via
	cvs -d:pserver:anonymous@monetdb.cvs.sourceforge.net:/cvsroot/monetdb checkout -P -rMonetDB_4-16 buildtools
See the buildtools' README file for more details.


Compilation
===========

In the following, we use <SOURCE> for the absolute path of the directory
where this README file resides in.

Further, be <BUILD> the absolute path of some (temporary) directory, where
the source code will be compiled; preferably <BUILD> != <SOURCE>; e.g.
<BUILD> = <SOURCE>/Build .

Finally, be <PREFIX> the prefix of the absolute path of target directory
where you'd like to install the "geom" module in, i.e., the module will
finally be installed in <PREFIX>/lib(64)/MonetDB/ .

To compile the "geom" module for the first time, simply execute the
following commands:

	cd <SOURCE>
	./bootstrap
	cd <BUILD>
	<SOURCE>/configure --prefix=<PREFIX>
	make
	make install

To re-compile the "geom" module (e.g., after you modified the source
code), you can skip the `bootstrap` and `configure` calls, and simply call
`make && make install` in <BUILD> .


Usage
=====

In case the compilation worked well, you can start MonetDB and load the
"geom" module as follows (assuming "Mserver" is reachable via your
$PATH), e.g.:

	Mserver --set monet_mod_path=`monetdb-config --modpath`:<PREFIX>/lib(64)/MonetDB/ --dbinit='module(geom);'

Alternatively, you can add <PREFIX>/lib(64)/MonetDB/ to the "monet_mod_path" in
your MonetDB config file.

In case the <PREFIX> for the "geom" module is identical with the prefix
where MonetDB is installed, you don't have to set/edit the "monet_mod_path"
at all.


Source Distribution
===================

To create a source distribution of the "geom" module that can be compiled
without requiring the "buildtools" (obviously, MonetDB is still required),
simply follow the "Compilation" instructions above, and then call 
`make dist` in <BUILD> .
This will create a "geom-0.1.3.tar.gz" in <BUILD>, which can then be
distributed.
From this source distribution, compilation works just as above, except that
the `bootstrap` has to be skipped.
