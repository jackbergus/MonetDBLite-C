@echo off

if not "%1"=="" goto skip
call %0 -r
goto end

:skip

setlocal

rem default back end is monetdb5
set V=5
if "%1" == "-4" set V=4& shift
if "%1" == "-5" set V=5& shift

set pkg=sql
set buildbase=@XBUILD@
set builddir=%buildbase%\geom
set srcdir=@XSOURCE@\geom

set PYTHONPATH=%buildbase%\testing\src;%srcdir%\..\testing\src;%PYTHONPATH%

REM execute Mapprove.py in the source directory
pushd %srcdir%

call "%buildbase%\testing\src\Mapprove.py" -%V% "--package=%pkg%" "--TSTTRGBASE=%builddir%" %1 %2 %3 %4 %5 %6 %7 %8 %9

popd
endlocal

:end
