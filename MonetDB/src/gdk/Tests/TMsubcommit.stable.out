stdout of test 'TMsubcommit` in directory 'src/gdk` itself:


# 12:47:18 >  
# 12:47:18 >  Mtimeout -timeout 60 Mserver "--config=/var/tmp/_Current_PREFIX__GNU_32_d_--enable-debug_--enable-noexpand=all_/etc/MonetDB.conf" --debug=10 --set "monet_mod_path=/var/tmp/_Current_PREFIX__GNU_32_d_--enable-debug_--enable-noexpand=all_/lib/MonetDB:/var/tmp/_Current_PREFIX__GNU_32_d_--enable-debug_--enable-noexpand=all_/lib/bin" --set "gdk_dbfarm=/var/tmp/_Current_PREFIX__GNU_32_d_--enable-debug_--enable-noexpand=all_/var/MonetDB/dbfarm" --set "sql_logdir=/var/tmp/_Current_PREFIX__GNU_32_d_--enable-debug_--enable-noexpand=all_/var/MonetDB/log" --set mapi_port=31315 --set sql_port=44739 --set xquery_port=54477 --set monet_prompt= --trace --dbname=mTests_src_gdk  < TMsubcommit.milS
# 12:47:18 >  

# Monet Database Server V4.7.3
# Copyright (c) 1993-2005, CWI. All rights reserved.
# Compiled for i686-redhat-linux-gnu/32bit; dynamically linked.
# Visit http://monetdb.cwi.nl/ for further information.
debugmask(19);

bat(int,int).insert(1,2).rename("b").persists(true);
commit();
#01 HEAPsave(32.buns,storage=0,free=8,size=2048)
#01 GDKsave: name=32, ext=buns, mode 0
#01 fwrite(buf 0x55e2b0, size 0, fd 6) = 0
#01 BATsavedesc(32,free=8) = 0
#01 #BBPdir: writing BBP.dir (29 bats).
#01 BBPdir start oid=1010030@0 #01 
[  26, 64, b, 32, 4457 ]
[  27, 32, MMO_location, 33, 1 ]
#01 BBPdir end
#01 BBPsync: rename bat/BACKUP/ bat/DELETE_ME/ = 0
#01 GDKremovedir(bat/DELETE_ME/)
#01 unlink bat/DELETE_ME/BBP.dir = 0
#01 rmdir bat/DELETE_ME/ = 0
#01 mkdir bat/BACKUP/ = 0
#01 move bat/BBP.dir bat/BACKUP/BBP.dir = 0 (0ms)

bat(int,int).insert(3,4).rename("a").persists(true);
subcommit(bat(int,str).insert(0,"a"));
#01 save a
#01 HEAPsave(32.buns,storage=0,free=8,size=400)
#01 GDKsave: name=32, ext=buns, mode 0
#01 fwrite(buf 0x80bcd68, size 0, fd 8) = 0
#01 BATsavedesc(32,free=8) = 0
#01 #BBPdir: writing BBP.dir (30 bats).
#01 BBPdir start oid=1010034@0 #01 
[  26, 32, b, 32, 4457 ]
[  27, 32, MMO_location, 33, 1 ]
[  29, 64, a, 35, 4501 ]
#01 BBPdir end
#01 unlink bat/BACKUP/BBP.dir = 0

{
var tmp := bat(int,str).insert(0,"a");
bat("a").persists(false);
subcommit(tmp);
}
#01 mkdir bat/BACKUP/SUBCOMMIT/ = 0
#01 move bat/BACKUP/BBP.dir bat/BACKUP/SUBCOMMIT/BBP.dir = 0 (2ms)
#01 #BBPdir: writing BBP.dir (30 bats).
#01 BBPdir start oid=1010034@0 #01 
[  26, 32, b, 32, 4457 ]
[  27, 32, MMO_location, 33, 1 ]
#01 BBPdir end
#01 unlink bat/BACKUP/BBP.dir = 0
#01 BATdelete 32
#01 unlink bat/32.desc = 0
#01 unlink bat/32.buns = 0

bat("b").persists(false);
commit();
#01 #BBPdir: writing BBP.dir (29 bats).
#01 BBPdir start oid=1002548@0 #01 
[  27, 32, MMO_location, 33, 1 ]
#01 BBPdir end
#01 BBPsync: rename bat/BACKUP/ bat/DELETE_ME/ = 0
#01 GDKremovedir(bat/DELETE_ME/)
#01 rmdir bat/DELETE_ME/ = 0
#01 mkdir bat/BACKUP/ = 0
#01 move bat/BBP.dir bat/BACKUP/BBP.dir = 0 (0ms)
#01 BATdelete 33
#01 unlink bat/33.desc = 0
#01 unlink bat/33.buns = 0
quit();

# 12:47:18 >  
# 12:47:18 >  Done.
# 12:47:18 >  

