
setoid(oid(20000000));

proc loth(int a,int b): bit {return (a<b);}
proc loth(flt a,flt b): bit {return (a<b);}
proc grth(flt a,flt b): bit {return (a>b);}

var a:=new(str,int);
a.insert("A",1);
a.insert("B",2);
a.insert("C",3);
a.print();

var b:=new(int,flt);
b.insert(1,1.1);
b.insert(2,2.2);
b.insert(3,3.3);
b.print();

thetajoin(a,b,LT,lng(nil)).print();
join(a,b,"loth").print();

b.insert(4,4.4);
b.print();

thetajoin(a,b,LT,lng(nil)).print();
join(a,b,"loth").print();

select(b,flt(nil),3.4).print();
mil_select(b,"<=",3.4).print();
mil_select(b,"loth",3.4).print();
mil_select(b,"[in]",1.1,3.4).print();
mil_select(b,"between",1.1,3.4).print();
neg_select(b,">",3.4).print();
neg_select(b,"grth",3.4).print();
neg_select(b,"between",3.4,5.5).print();
rev_select(b,">=",3.4).print();

var b:=new(oid,oid);
b.insert(0@0,0@0);
b.insert(10@0,10@0);
b.info().find("hsorted").print();
b.info().find("tsorted").print();
b.info().find("hkey").print();
b.info().find("tkey").print();
var m:=b.merge();
m.info().find("hsorted").print();
m.info().find("tsorted").print();
m.info().find("hkey").print();
m.info().find("tkey").print();
var s:=m.split();
s.info().find("hsorted").print();
s.info().find("tsorted").print();
s.info().find("hkey").print();
s.info().find("tkey").print();

b.insert(5@0,0@0);
b.info().find("hsorted").print();
b.info().find("tsorted").print();
b.info().find("hkey").print();
b.info().find("tkey").print();
var m:=b.merge();
m.info().find("hsorted").print();
m.info().find("tsorted").print();
m.info().find("hkey").print();
m.info().find("tkey").print();
var s:=m.split();
s.info().find("hsorted").print();
s.info().find("tsorted").print();
s.info().find("hkey").print();
s.info().find("tkey").print();

quit();
