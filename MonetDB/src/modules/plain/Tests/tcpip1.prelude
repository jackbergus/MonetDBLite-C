module("tcpip");module("alarm");

proc get_mapi_port() : void {
	if (monet_environment.exist("mapi_port")){
		return int(monet_environment.find("mapi_port"));
	} else {
		return 55555;
	}
}

VAR tcpip_port := get_mapi_port();

fork(listen(tcpip_port));
sleep(2);
VAR c := open("localhost:"+str(tcpip_port));

