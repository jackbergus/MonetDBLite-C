# >Number:         107
# >Category:       MIL
# >Synopsis:       related? bug with voids
# >Confidential:   no
# >Severity:       serious
# >Priority:       medium
# >Responsible:    boncz
# >State:          open
# >Class:          sw-bug
# >Submitter-Id:   unknown
# >Arrival-Date:   Wed Jan  7 15:49:59 1998
# >Originator:     arjen
# >Organization:
# Other
# >Release:        971007
# >Environment:
# Solaris 2.5.1
# >Description:
# Okay, maybe this helps in determining the problem with voids as
# reported earlier today: (other option is below)
# 
# #
# # Text retrieval testjes
# #
# 
# # w.bat is een text dump formaat ( oid, str ),
# # bevattende docid, term
# w := new( oid, str );
# w.import( "w.bat" );
# w.print();
# 
# # [t_i, n_i]
# w.histogram.print;
# 
# #split w in twee tabellen
# docid := new( void, oid );
# tid := new( void, str );
# docid.insert( [w~].reverse );
# tid.insert( [~w] );
# 
# docid.seqbase( 1000@0 );
# tid.seqbase( 1000@0 );
# print( docid, tid );
# 
# module( "xtables" );
# CTgroup( docid, tid ).map().print;
# 
# # t_i, tf_ij
# join( tid.reverse, CTgroup( docid, tid ).histogram()).print;
# # d_j, max tf_j
# djtfij := new( oid, int );
# djtfij.insert( join( docid.reverse, CTgroup( docid, tid ).histogram() ) );
# 
# {max}(djtfij).print;
# 
# -----------------------------
# This way it works. However, if I do not do an explicit new and insert,
# then the server crashes as follows:
# 
# > djtfij :=join( docid.reverse, CTgroup( docid, tid ).histogram() );
# > {max}(djtfij).print;
# !ERROR: BATcreate:tt error
#  
# !ERROR: BUNins: BAT required.
#  
# !ERROR: BATcreate:tt error
#  
# !ERROR: BUNins: BAT required.
#  
# !ERROR: BATcreate:tt error
#  
# !ERROR: BUNins: BAT required.
#  
# ! Terminating connection
# ! Connection broken

setoid(oid(10000000));
module("unix");module("ascii_io");
#
# Text retrieval testjes
#

# w.bat is een text dump formaat ( oid, str ),
# bevattende docid, term
var w := new( oid, str );
w.import( sprintf("%s/no.107.w.bat",getenv("TSTTRGDIR")) );
w.print();
