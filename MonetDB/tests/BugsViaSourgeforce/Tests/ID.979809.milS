module("unix");
module(ascii_io);

var cwd := getenv("TSTTRGDIR");
var word_file := sprintf("%s/ID.979809.txt", cwd);


var word_table:= new(oid,str);
word_table.import(word_file);

print("selecting 'nil' words. The result should be 2");
word_table.select("nil").count().print();    # should be 2 and it is 0

print("selecting nil values. The result should be 0");
word_table.select(str(nil)).count().print();    # should be 1 and it is 3

print("the table imported");
word_table.print();    # the "nil" words are converted to nil values     


var names := new(void,str).seqbase(0@0);
names.append("one");
names.append("two");
var seps := new(void,str).seqbase(0@0);
seps.append(",");
seps.append("\n");
var types := new(void,str).seqbase(0@0);
types.append("oid");
types.append("str");

var bats := load( names, seps, types, word_file, -1);
print(bats.find("one"),bats.find("two"));


quit();



