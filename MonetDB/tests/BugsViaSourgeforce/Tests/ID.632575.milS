
# Date:		2002-11-02 14:41
# Priority:	5
# Submitted By:	Stefan Manegold (stmane)
# Assigned To:	None
# Category:	None
# Status:	Open
# Summary: kunique fails with empty strings
# 
# Initial Comment:
# In some cases, kunique fails on a str column that contains >1 empty
# strings (""). See example below, and/or the respective test script and
# stable output in tests/BugsViaSourgeforce[/Tests]; the files are named
# using the ID of this bugreport.
# 
# The problem also occurs with test/Availability[/Tests]/01_Modules_static,
# most probably since Peter Boncz added the unicode support on Oct 9 2002. 
# I have no idea, where the problem might come from.
# Note also, that the problem seems to occur "non-deterministically"...

var v1 := new(void,str).seqbase(0@0);

v1.append("");
v1.append("b");
v1.append("");
v1.append("c");
v1.append("");
v1.append("a");
v1.append("");
v1.print();

var v2 := v1.reverse().kunique().reverse();
var v3 := v2.reverse().sort().reverse();
v3.print();

var v4 := new(void,str);

v4.insert(nil,"");
v4.insert(nil,"b");
v4.insert(nil,"");
v4.insert(nil,"c");
v4.insert(nil,"");
v4.insert(nil,"a");
v4.insert(nil,"");
v4.print();

var v5 := v4.reverse().kunique().reverse();
var v6 := v5.reverse().sort().reverse();
v6.print();

var v7 := v4.reverse().mark(0@0).reverse();
v7.print();

var v8 := v7.reverse().kunique().reverse();
var v9 := v8.reverse().sort().reverse();
v9.print();

quit();
