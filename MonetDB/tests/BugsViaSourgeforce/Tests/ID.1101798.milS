module(xtables);

var item_1 := bat (void,oid).seqbase(0@0).append(1@0).append(2@0).append(3@0).append(4@0).append(5@0).access(BAT_READ);
var iter_1 := item_1.project(1@0);
var iter_2 := iter_1.project(1@0);
var item_2 := iter_2.mark(1@0);
var kind_1 := iter_1.project(97);
var kind_2 := iter_2.project(97);
print(iter_1,kind_1,item_1);
print(iter_2,kind_2,item_2);
var sorting_1 := iter_1.reverse().sort().reverse();
var sorting_2 := iter_2.reverse().sort().reverse();
print(sorting_1);
print(sorting_2);
sorting_1 := sorting_1.CTrefine(kind_1);
sorting_2 := sorting_2.CTrefine(kind_2);
print(sorting_1);
print(sorting_2);
sorting_1 := sorting_1.CTrefine(item_1);
sorting_2 := sorting_2.CTrefine(item_2);
print(sorting_1);
print(sorting_2);
sorting_1 := sorting_1.reverse().{min}().reverse().mark(0@0).reverse();
sorting_2 := sorting_2.reverse().{min}().reverse().mark(0@0).reverse();
print(sorting_1);
print(sorting_2);

quit();
