module(tcpip);module(radix);

PROC g(): bat[void, dbl] {
	var a := uniform(100000).[dbl]().copy();
	printf("done...\n");
	RETURN a;
} 

fork(listen());

var cid := open("localhost");
var res := rpc(cid, "g();"); # caused crash
print(count(res));
print(mark(slice(res, 0, 10), 0@0)); # mark to avoid random output
