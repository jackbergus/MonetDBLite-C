let $doc := doc("$TSTTRGDIR/load_docs.xml")//doc/text()

for $b1 in doc(exactly-one($doc[1]))/ComplexAssembly/ComplexAssembly/ComplexAssembly/ComplexAssembly/BaseAssembly,
    $b2 in doc(exactly-one($doc[2]))/ComplexAssembly/ComplexAssembly/ComplexAssembly/ComplexAssembly/BaseAssembly
where   $b1/@type = $b2/@type
and     $b1/@buildDate < $b2/@buildDate
return  $b1
