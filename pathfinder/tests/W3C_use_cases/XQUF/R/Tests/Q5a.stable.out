stdout of test 'Q5a` in directory 'tests/W3C_use_cases/XQUF/R` itself:


# 21:28:33 >  
# 21:28:33 >  Mtimeout -timeout 60 Mserver "--config=/Win/MonetDB/.GNU.32.32.d.--disable-optimize_--enable-debug.PREFIX./MONETDB/etc/MonetDB.conf" --debug=10 --set "monet_mod_path=/Win/MonetDB/.GNU.32.32.d.--disable-optimize_--enable-debug.PREFIX./PATHFINDER/lib/MonetDB:/Win/MonetDB/.GNU.32.32.d.--disable-optimize_--enable-debug.PREFIX./PATHFINDER/lib/MonetDB/lib:/Win/MonetDB/.GNU.32.32.d.--disable-optimize_--enable-debug.PREFIX./MONETDB/lib/MonetDB:/Win/MonetDB/.GNU.32.32.d.--disable-optimize_--enable-debug.PREFIX./MONETDB/lib/MonetDB/lib:/Win/MonetDB/.GNU.32.32.d.--disable-optimize_--enable-debug.PREFIX./MONETDB/lib/MonetDB/bin" --set "gdk_dbfarm=/Win/MonetDB/.GNU.32.32.d.--disable-optimize_--enable-debug.PREFIX./MONETDB/var/MonetDB/dbfarm" --set "sql_logdir=/Win/MonetDB/.GNU.32.32.d.--disable-optimize_--enable-debug.PREFIX./MONETDB/var/MonetDB/sql_logs" --set "sql_logdir=/Win/MonetDB/.GNU.32.32.d.--disable-optimize_--enable-debug.PREFIX./MONETDB/var/MonetDB/xquery_logs" --set mapi_port=30119 --set monet_prompt= --trace --dbname=mTests_tests_W3C_use_cases_XQUF_R  < Q5a.milS
# 21:28:33 >  

# Monet Database Server V4.13.1
# Copyright (c) 1993-2006, CWI. All rights reserved.
# Compiled for i686-redhat-linux-gnu/32bit with 32bit OIDs; dynamically linked.
# Visit http://monetdb.cwi.nl/ for further information.
module(unix);
module(pathfinder);

xquery("xml","
let $uid :=
doc(\"users.xml\")/users/user_tuple[name=\"Annabel Lee\"]/userid
let $topbid :=
max(doc(\"bids.xml\")/bids/bid_tuple[itemno=1007]/bid)
where $topbid*1.1 <= 200
return
  do insert
    <bid_tuple>
      <userid>{data($uid)}</userid>
      <itemno>1007</itemno>
      <bid>{$topbid*1.1}</bid>
      <bid_date>1999-02-01</bid_date>
    </bid_tuple>
  into doc(\"bids.xml\")/bids
").printf();

xquery("xml","doc(\"bids.xml\")").printf();
<?xml version="1.0" encoding="utf-8"?>
<XQueryResult>
<bids>
  <bid_tuple> 
    <userid>U02</userid> 
    <itemno>1001</itemno> 
    <bid>35</bid> 
    <bid_date>1999-01-07</bid_date> 
  </bid_tuple> 
  <bid_tuple>
    <userid>U04</userid>
    <itemno>1001</itemno>
    <bid>40</bid>
    <bid_date>1999-01-08</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U02</userid>
    <itemno>1001</itemno>
    <bid>45</bid>
    <bid_date>1999-01-11</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U04</userid>
    <itemno>1001</itemno>
    <bid>50</bid>
    <bid_date>1999-01-13</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U02</userid>
    <itemno>1001</itemno>
    <bid>55</bid>
    <bid_date>1999-01-15</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U01</userid>
    <itemno>1002</itemno>
    <bid>400</bid>
    <bid_date>1999-02-14</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U02</userid>
    <itemno>1002</itemno>
    <bid>600</bid>
    <bid_date>1999-02-16</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U03</userid>
    <itemno>1002</itemno>
    <bid>800</bid>
    <bid_date>1999-02-17</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U04</userid>
    <itemno>1002</itemno>
    <bid>1000</bid>
    <bid_date>1999-02-25</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U02</userid>
    <itemno>1002</itemno>
    <bid>1200</bid>
    <bid_date>1999-03-02</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U04</userid>
    <itemno>1003</itemno>
    <bid>15</bid>
    <bid_date>1999-01-22</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U05</userid>
    <itemno>1003</itemno>
    <bid>20</bid>
    <bid_date>1999-02-03</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U01</userid>
    <itemno>1004</itemno>
    <bid>40</bid>
    <bid_date>1999-03-05</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U03</userid>
    <itemno>1007</itemno>
    <bid>175</bid>
    <bid_date>1999-01-25</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U05</userid>
    <itemno>1007</itemno>
    <bid>200</bid>
    <bid_date>1999-02-08</bid_date>
  </bid_tuple>
  <bid_tuple> 
    <userid>U04</userid> 
    <itemno>1007</itemno> 
    <bid>225</bid> 
    <bid_date>1999-02-12</bid_date> 
  </bid_tuple> 
  <bid_tuple>
    <userid>U07</userid>
    <itemno>1001</itemno>
    <bid>60</bid>
    <bid_date>1999-02-01</bid_date>
  </bid_tuple>
  <bid_tuple>
    <userid>U07</userid>
    <itemno>1002</itemno>
    <bid>1320</bid>
    <bid_date>1999-02-01</bid_date>
    </bid_tuple>
  </bids>
</XQueryResult>
quit();

# 21:28:35 >  
# 21:28:35 >  Done.
# 21:28:35 >  

