declare option pf:recursion-depth "5";

declare function doThing($folders as node()*) as node()* {
	for $folder in $folders
	return element folder { doThing($folder/folder) }
};

doThing((doc("$TSTSRCDIR/combination_of_constructed_and_doc_elements.SF-2059394.xml")/reports/folder, element folder { })) 

<>

((doc("$TSTSRCDIR/combination_of_constructed_and_doc_elements.SF-2059394.xml")/reports/folder, element folder { }))/folder
