module(ascii_io);
module(unix);
module(pathfinder);
var TSTSRCDIR := getenv("TSTSRCDIR");
shred_doc(TSTSRCDIR+"/hello.xml", "a.xml", "Hello", 9LL);

xquery("xml","
doc(\"a.xml\")
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/cwi
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/world
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/iwc
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/dlrow
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
do rename doc(\"a.xml\")/hello/dlrow into \"iwc\"
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/cwi
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/world
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/iwc
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/dlrow
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
do insert <cwi/> as first into doc(\"a.xml\")/hello
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/cwi
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/world
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/iwc
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/dlrow
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
do delete doc(\"a.xml\")/hello/world
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/cwi
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/world
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/iwc
").printf();
fflush(stdout());
fflush(stderr());

xquery("xml","
doc(\"a.xml\")/hello/dlrow
").printf();
fflush(stdout());
fflush(stderr());

delete_doc("a.xml");
quit();
