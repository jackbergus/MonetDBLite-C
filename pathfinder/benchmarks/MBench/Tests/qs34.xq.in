for $e in doc("$TSTTRGDIR/sf0.1.xml")//eNest[@aFour=1] return
  if (exists($e/eNest[@aLevel=11]) and exists($e//eNest[@aSixtyFour=3])) then 
  <ancester aUnique1="{$e/@aUnique1}" aLevel="{$e/@aLevel}">
{   for $c1 in $e/eNest[@aLevel=11 and position()=1] return

    <child aUnique1="{$c1/@aUnique1}" aLevel="{$c1/@aLevel}">
    </child>
}
{         for $c2 in $e//eNest[@aSixtyFour=3 and position()=1] return
    <descendant aUnique1="{$c2/@aUnique1}" aSixtyFour="{$c2/@aSixtyFour}">
    </descendant>
}
  </ancester>
else()
