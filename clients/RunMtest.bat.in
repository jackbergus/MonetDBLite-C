@echo off

if not "%1"=="" goto skip
call %0 -rq
goto end

:skip

setlocal

set pkg=monetdb-clients
set buildbase=@XBUILD@
set builddir=%buildbase%\clients
set srcdir=@XSOURCE@\clients

set PATH=%builddir%\conf;%PATH%
set PATH=%builddir%\src\mapiclient;%PATH%
set PATH=%builddir%\src\mapilib;%PATH%
set PATH=%builddir%\src\python;%PATH%

set PYTHONPATH=%srcdir%\src\python;%buildbase%\testing\src;%PYTHONPATH%

REM execute Mtest.py in the source directory
pushd %srcdir%

call "%buildbase%\testing\src\Mtest.py" --package=%pkg% "--dbfarm=%builddir%\dbfarm" "--TSTSRCBASE=%srcdir%" "--TSTTRGBASE=%builddir%" %*

popd
endlocal

:end
